diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
new file mode 100644
index 0000000000000000000000000000000000000000..10e9dbd5d6da2d2f6dcc5682848baf1e6a98918f
--- /dev/null
+++ b/.github/workflows/ci.yml
@@ -0,0 +1,26 @@
+name: CI
+
+on:
+  push:
+    branches: [main]
+  pull_request:
+
+jobs:
+  build-and-test:
+    runs-on: ubuntu-latest
+    steps:
+      - name: Checkout
+        uses: actions/checkout@v4
+      - name: Use Node.js
+        uses: actions/setup-node@v4
+        with:
+          node-version: '20'
+          cache: npm
+      - name: Install dependencies
+        run: npm install
+      - name: Typecheck
+        run: npm run typecheck
+      - name: Unit tests
+        run: npm run test
+      - name: Build
+        run: npm run build
diff --git a/README.md b/README.md
index 7ff1da8d890297e1953eacbc0de1a4eb2066ef46..2c281d513638e450da3fdfd2ca29f1c29509fb63 100644
--- a/README.md
+++ b/README.md
@@ -1,20 +1,23 @@
 <div align="center">
 <img width="1200" height="475" alt="GHBanner" src="https://github.com/user-attachments/assets/0aa67016-6eaf-458a-adb2-6e31a0763ed6" />
 </div>
 
-# Run and deploy your AI Studio app
+# Run and deploy your app
 
 This contains everything you need to run your app locally.
 
-View your app in AI Studio: https://ai.studio/apps/drive/1o_ZcelVW-r-X5klq4POBQBRuykQldbik
-
 ## Run Locally
 
 **Prerequisites:**  Node.js
 
 
 1. Install dependencies:
    `npm install`
-2. Set the `GEMINI_API_KEY` in [.env.local](.env.local) to your Gemini API key
-3. Run the app:
+2. Run the app:
    `npm run dev`
+
+## Tests & Checks
+
+* Run unit tests: `npm run test`
+* Run a typecheck: `npm run typecheck`
+* Build for production: `npm run build`
diff --git a/components/views/IngredientsRecettes.tsx b/components/views/IngredientsRecettes.tsx
index 88594448c9f20d75dceafaf7d95fb6791867fd63..d11a92b34d942564cabbf6a325fd78f17d9b78b8 100644
--- a/components/views/IngredientsRecettes.tsx
+++ b/components/views/IngredientsRecettes.tsx
@@ -1,133 +1,140 @@
 
 import React, { useState } from 'react';
 import { Ingredient, Recipe, Unit, RecipeIngredient } from '../../types';
 import { calculateRecipeMaterialCost } from '../../utils';
+import { isPercentage, isPositiveNumber, parseOptionalNumber } from '../../validation';
 import { Button, Card, Input } from '../ui/Common';
 
 interface Props {
   ingredients: Ingredient[];
   recipes: Recipe[];
   setRecipes: React.Dispatch<React.SetStateAction<Recipe[]>>;
 }
 
 export const IngredientsRecettes: React.FC<Props> = ({ ingredients, recipes, setRecipes }) => {
   // Scaler State: Map recipeID -> targetQuantity (string for input handling)
   const [scalerTargets, setScalerTargets] = useState<Record<string, string>>({});
 
   // --- Recipe State ---
   const [newRecipe, setNewRecipe] = useState<Partial<Recipe>>({ name: '', batchYield: 1, lossPercentage: 0 });
   const [currentRecipeIngs, setCurrentRecipeIngs] = useState<RecipeIngredient[]>([]);
   const [selectedIngId, setSelectedIngId] = useState<string>('');
   const [selectedIngQty, setSelectedIngQty] = useState<string>('');
 
+  const isBatchYieldValid = isPositiveNumber(newRecipe.batchYield);
+  const isLossPercentageValid = isPercentage(newRecipe.lossPercentage);
+  const isRecipeFormValid = Boolean(newRecipe.name && currentRecipeIngs.length > 0 && isBatchYieldValid && isLossPercentageValid);
+
   const handleAddIngToRecipe = () => {
-    const qty = parseFloat(selectedIngQty);
-    if (!selectedIngId || isNaN(qty) || qty <= 0) return;
+    const qty = parseOptionalNumber(selectedIngQty);
+    if (!selectedIngId || !isPositiveNumber(qty)) return;
     
     // Check if already added
     const exists = currentRecipeIngs.find(i => i.ingredientId === selectedIngId);
     if (exists) {
       setCurrentRecipeIngs(currentRecipeIngs.map(i => i.ingredientId === selectedIngId ? { ...i, quantity: i.quantity + qty } : i));
     } else {
       setCurrentRecipeIngs([...currentRecipeIngs, { ingredientId: selectedIngId, quantity: qty }]);
     }
     
     setSelectedIngId('');
     setSelectedIngQty('');
   };
 
   const handleSaveRecipe = () => {
-    if (!newRecipe.name || currentRecipeIngs.length === 0) return;
+    if (!isRecipeFormValid) return;
     setRecipes([...recipes, {
       id: Date.now().toString(),
       name: newRecipe.name!,
       ingredients: currentRecipeIngs,
-      batchYield: Number(newRecipe.batchYield) || 1,
-      lossPercentage: Number(newRecipe.lossPercentage) || 0
+      batchYield: Number(newRecipe.batchYield ?? 1),
+      lossPercentage: Number(newRecipe.lossPercentage ?? 0)
     }]);
     setNewRecipe({ name: '', batchYield: 1, lossPercentage: 0 });
     setCurrentRecipeIngs([]);
   };
 
   const handleDeleteRecipe = (id: string) => {
     setRecipes(recipes.filter(r => r.id !== id));
   };
 
   const toggleScaler = (recipeId: string) => {
       setScalerTargets(prev => {
           const next = { ...prev };
           if (next[recipeId] !== undefined) delete next[recipeId];
           else next[recipeId] = '';
           return next;
       });
   };
 
   const updateScalerTarget = (recipeId: string, value: string) => {
       setScalerTargets(prev => ({ ...prev, [recipeId]: value }));
   };
 
   // Calculate provisional cost of new recipe
   const tempRecipe: Recipe = {
     id: 'temp',
     name: 'temp',
     ingredients: currentRecipeIngs,
-    batchYield: newRecipe.batchYield || 1,
-    lossPercentage: newRecipe.lossPercentage || 0
+    batchYield: newRecipe.batchYield ?? 1,
+    lossPercentage: newRecipe.lossPercentage ?? 0
   };
   const tempBatchCost = calculateRecipeMaterialCost(tempRecipe, ingredients);
-  const tempUnitCost = tempBatchCost / (newRecipe.batchYield || 1);
+  const tempUnitCost = tempBatchCost / (newRecipe.batchYield ?? 1);
 
   return (
     <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
       {/* New Recipe Form */}
       <div className="lg:col-span-5 space-y-6">
         <Card className="sticky top-24 border-rose-200 dark:border-rose-800">
           <h3 className="text-xl font-bold text-rose-950 dark:text-rose-100 font-serif mb-4">Cr√©er une Recette</h3>
           <p className="text-sm text-stone-500 mb-4">Pour g√©rer les ingr√©dients (prix, stock), allez dans l'onglet "Stocks & Achats".</p>
           
           <div className="space-y-4 mb-6">
             <Input 
               label="Nom de la recette" 
               placeholder="Ex: P√¢te √† choux (50 chouquettes)"
               value={newRecipe.name} 
               onChange={e => setNewRecipe({...newRecipe, name: e.target.value})} 
             />
             <div className="grid grid-cols-2 gap-4">
               <Input 
                 label="Rendement" 
                 type="number"
-                value={newRecipe.batchYield} 
-                onChange={e => setNewRecipe({...newRecipe, batchYield: parseFloat(e.target.value)})} 
+                value={newRecipe.batchYield ?? ''} 
+                onChange={e => setNewRecipe({...newRecipe, batchYield: parseOptionalNumber(e.target.value)})} 
                 helperText="Nb. de portions/unit√©s obtenues avec ce batch"
+                error={isBatchYieldValid ? undefined : '> 0'}
               />
               <Input 
                 label="Pertes mat. (%)" 
                 type="number"
-                value={newRecipe.lossPercentage} 
-                onChange={e => setNewRecipe({...newRecipe, lossPercentage: parseFloat(e.target.value)})} 
+                value={newRecipe.lossPercentage ?? ''} 
+                onChange={e => setNewRecipe({...newRecipe, lossPercentage: parseOptionalNumber(e.target.value)})} 
                 helperText="P√¢te rest√©e dans le bol..."
+                error={isLossPercentageValid ? undefined : '< 100%'}
               />
             </div>
           </div>
 
           <div className="bg-stone-50 dark:bg-stone-900 p-4 rounded-lg border border-stone-200 dark:border-stone-700 mb-6">
             <h4 className="text-sm font-semibold text-stone-700 dark:text-stone-300 mb-3">Composition du batch</h4>
             <div className="flex gap-2 mb-2">
               <select 
                 className="flex-1 text-sm border-stone-300 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 rounded-md focus:ring-2 focus:ring-rose-200 focus:outline-none"
                 value={selectedIngId}
                 onChange={e => setSelectedIngId(e.target.value)}
               >
                 <option value="">Choisir ingr√©dient...</option>
                 {ingredients.map(i => <option key={i.id} value={i.id}>{i.name}</option>)}
               </select>
               <input 
                 type="number" 
                 placeholder="Qt√©" 
                 className="w-20 text-sm border-stone-300 dark:border-stone-600 dark:bg-stone-800 dark:text-stone-200 rounded-md focus:ring-2 focus:ring-rose-200 focus:outline-none"
                 value={selectedIngQty}
                 onChange={e => setSelectedIngQty(e.target.value)}
               />
               <Button size="sm" onClick={handleAddIngToRecipe}>+</Button>
             </div>
             {/* List of added ingredients */}
@@ -136,68 +143,68 @@ export const IngredientsRecettes: React.FC<Props> = ({ ingredients, recipes, set
                 const ing = ingredients.find(i => i.id === ri.ingredientId);
                 if(!ing) return null;
                 const displayUnit = (ing.unit === Unit.KG || ing.unit === Unit.G) ? 'g' : (ing.unit === Unit.L || ing.unit === Unit.ML) ? 'ml' : 'pcs';
                 return (
                   <div key={idx} className="flex justify-between text-sm text-stone-600 dark:text-stone-300 bg-white dark:bg-stone-800 px-2 py-1 rounded border border-stone-100 dark:border-stone-700">
                     <span>{ing.name}</span>
                     <span>{ri.quantity} {displayUnit}</span>
                   </div>
                 );
               })}
               {currentRecipeIngs.length === 0 && <p className="text-xs text-stone-400 italic">Aucun ingr√©dient ajout√©</p>}
             </div>
           </div>
 
           <div className="bg-emerald-50 dark:bg-emerald-900/30 p-4 rounded-lg mb-4 border border-emerald-100 dark:border-emerald-800">
             <div className="flex justify-between text-sm text-emerald-800 dark:text-emerald-300 mb-1">
               <span>Co√ªt Mati√®res Batch:</span>
               <span className="font-bold">{tempBatchCost.toFixed(2)} ‚Ç¨</span>
             </div>
             <div className="flex justify-between text-sm text-emerald-800 dark:text-emerald-300">
               <span>Co√ªt Mati√®res / Unit√©:</span>
               <span className="font-bold">{tempUnitCost.toFixed(2)} ‚Ç¨</span>
             </div>
           </div>
 
-          <Button className="w-full" onClick={handleSaveRecipe} disabled={!newRecipe.name || currentRecipeIngs.length === 0}>
+          <Button className="w-full" onClick={handleSaveRecipe} disabled={!isRecipeFormValid}>
             Enregistrer la recette
           </Button>
         </Card>
       </div>
 
       {/* Recipe List */}
       <div className="lg:col-span-7 space-y-4">
           <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 font-serif">Mes Recettes</h3>
           <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
             {recipes.map(recipe => {
               const batchCost = calculateRecipeMaterialCost(recipe, ingredients);
-              const unitCost = batchCost / (recipe.batchYield || 1);
+              const unitCost = batchCost / (recipe.batchYield ?? 1);
               
               const isScaling = scalerTargets.hasOwnProperty(recipe.id);
               const targetQtyStr = scalerTargets[recipe.id] || '';
               const targetQty = parseFloat(targetQtyStr);
-              const scaleRatio = (targetQty && !isNaN(targetQty)) ? targetQty / (recipe.batchYield || 1) : 1;
+              const scaleRatio = (targetQty && !isNaN(targetQty)) ? targetQty / (recipe.batchYield ?? 1) : 1;
 
               return (
                 <Card key={recipe.id} className="relative hover:shadow-md transition-shadow">
                   <div className="flex justify-between items-start mb-2">
                     <h4 className="font-bold text-stone-800 dark:text-stone-100">{recipe.name}</h4>
                     <div className="flex gap-2">
                       <button 
                         onClick={() => toggleScaler(recipe.id)}
                         className={`text-xs px-2 py-1 rounded border ${isScaling ? 'bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900 dark:text-indigo-200 dark:border-indigo-700' : 'bg-stone-50 text-stone-500 border-stone-200 dark:bg-stone-800 dark:text-stone-400 dark:border-stone-700'}`}
                         title="Ouvrir le calculateur"
                       >
                         ‚öñÔ∏è
                       </button>
                       <button onClick={() => handleDeleteRecipe(recipe.id)} className="text-xs text-red-400 hover:text-red-600">X</button>
                     </div>
                   </div>
                   <div className="text-sm text-stone-500 dark:text-stone-400 mb-4">
                     Rendement standard: {recipe.batchYield} unit√©s <br/>
                   </div>
 
                   {/* SCALER MODE */}
                   {isScaling && (
                     <div className="mb-4 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-100 dark:border-indigo-800 relative animate-in fade-in zoom-in-95 duration-200">
                        <div className="flex justify-between items-center mb-2">
                          <label className="text-xs font-bold text-indigo-800 dark:text-indigo-300">Combien en voulez-vous ?</label>
diff --git a/components/views/MonthlyReport.tsx b/components/views/MonthlyReport.tsx
index 944c90b1294289a86ef29073b46229ea43f3ddd5..e754840b28647b0b25ba0f279f7531db995e75d4 100644
--- a/components/views/MonthlyReport.tsx
+++ b/components/views/MonthlyReport.tsx
@@ -1,70 +1,69 @@
 
 import React, { useState, useEffect } from 'react';
 import { GlobalSettings, Product, Recipe, Ingredient, MonthlyEntry, Order, FixedCostItem, MonthlyReportData, InventoryEntry, Unit, ProductionBatch } from '../../types';
 import { calculateRecipeMaterialCost, formatCurrency } from '../../utils';
+import { isNonNegativeNumber } from '../../validation';
 import { Card, Input, Button, InfoTooltip } from '../ui/Common';
 
 interface Props {
   settings: GlobalSettings;
   products: Product[];
   recipes: Recipe[];
   ingredients: Ingredient[];
   orders: Order[];
   savedReports: MonthlyReportData[];
   setSavedReports: React.Dispatch<React.SetStateAction<MonthlyReportData[]>>;
   setSettings: React.Dispatch<React.SetStateAction<GlobalSettings>>; 
   productionBatches: ProductionBatch[];
 }
 
 // Helper: Calculate theoretical consumption for a single ingredient based on sales
 const calculateTheoreticalConsumption = (
   ingId: string, 
   sales: MonthlyEntry[], 
   products: Product[], 
   recipes: Recipe[],
   ingredients: Ingredient[]
 ): number => {
   return sales.reduce((total, sale) => {
     const product = products.find(p => p.id === sale.productId);
     const recipe = recipes.find(r => r.id === product?.recipeId);
     if (!product || !recipe) return total;
 
     // Find this ingredient in the recipe
     const recIng = recipe.ingredients.find(ri => ri.ingredientId === ingId);
     if (!recIng) return total;
 
     // Base quantity per batch
     const qtyPerBatch = recIng.quantity;
     
     // Qty per unit
-    const qtyPerUnit = qtyPerBatch / (recipe.batchYield || 1);
+    const qtyPerUnit = qtyPerBatch / (recipe.batchYield ?? 1);
 
     // Apply Manufacturing Loss (product level)
-    let safeLossRate = product.lossRate;
-    if (safeLossRate >= 100) safeLossRate = 99.9;
-    const mfgLossMultiplier = 1 / (1 - safeLossRate/100);
+    const mfgLossMultiplier = 1 / (1 - product.lossRate/100);
 
     // Total used = (Sold + Unsold) * QtyPerUnit * MfgLoss
     const totalUnitsProduced = sale.quantitySold + (sale.quantityUnsold || 0);
     
     return total + (totalUnitsProduced * qtyPerUnit * mfgLossMultiplier);
   }, 0);
 };
 
 export const MonthlyReport: React.FC<Props> = ({ 
   settings, products, recipes, ingredients, orders, savedReports, setSavedReports, setSettings, productionBatches
 }) => {
   const [selectedMonth, setSelectedMonth] = useState(new Date().toISOString().slice(0, 7)); 
   const [viewHistory, setViewHistory] = useState(false);
   const isTva = settings.isTvaSubject;
 
   // Editable State for current report
   const [sales, setSales] = useState<MonthlyEntry[]>([]);
   const [actualFixedItems, setActualFixedItems] = useState<FixedCostItem[]>([]);
   const [actualIngredientSpend, setActualIngredientSpend] = useState<number>(0); // Method 2
   const [inventory, setInventory] = useState<InventoryEntry[]>([]); // Method 3
   
   // Cost Calculation Mode: 0 = Calculated, 1 = Cash Spend, 2 = Inventory Variation
   const [costMode, setCostMode] = useState<0 | 1 | 2>(0);
 
   // --- Initialization Logic ---
@@ -84,53 +83,53 @@ export const MonthlyReport: React.FC<Props> = ({
       const relevantCompletedOrders = orders.filter(o => o.date.startsWith(selectedMonth) && o.status !== 'cancelled');
 
       const aggregatedSales: Record<string, number> = {};
       
       relevantCompletedOrders.forEach(o => {
         o.items.forEach(item => {
           aggregatedSales[item.productId] = (aggregatedSales[item.productId] || 0) + item.quantity;
         });
       });
 
       // Production Aggregation for the month
       const aggregatedProduction: Record<string, number> = {};
       productionBatches.filter(b => b.date.startsWith(selectedMonth)).forEach(b => {
           aggregatedProduction[b.productId] = (aggregatedProduction[b.productId] || 0) + b.quantity;
       });
 
       const initialSales = products.map(p => {
         const sold = aggregatedSales[p.id] || 0;
         const produced = aggregatedProduction[p.id] || 0;
         // Logic: Unsold is Production - Sold. Cannot be negative (if stock error, 0).
         const calculatedUnsold = Math.max(0, produced - sold);
 
         // Calculate theoretical price TTC for initialization
         const recipe = recipes.find(r => r.id === p.recipeId);
         const batchCost = recipe ? calculateRecipeMaterialCost(recipe, ingredients) : 0;
-        const unitMat = batchCost / (recipe?.batchYield || 1);
+        const unitMat = batchCost / (recipe?.batchYield ?? 1);
         const labor = (p.laborTimeMinutes/60) * settings.hourlyRate;
-        const fixed = (settings.fixedCostItems.reduce((s,i)=>s+i.amount,0) / products.reduce((s,prod)=>s+(prod.estimatedMonthlySales||1),0));
+        const fixed = (settings.fixedCostItems.reduce((s,i)=>s+i.amount,0) / products.reduce((s,prod)=>s+(prod.estimatedMonthlySales ?? 1),0));
         
         // Basic estimation without complex loss logic for default value
         const totalCostHT = unitMat + p.packagingCost + p.variableDeliveryCost + labor + fixed;
         const socialDivisor = (1 - settings.taxRate/100);
         const priceHT = (totalCostHT + p.targetMargin) / socialDivisor;
         const tvaRate = p.tvaRate ?? settings.defaultTvaRate ?? 0;
         const priceTTC = isTva ? priceHT * (1 + tvaRate/100) : priceHT;
 
         return {
           productId: p.id,
           quantitySold: sold,
           quantityUnsold: calculatedUnsold,
           actualPrice: priceTTC // Always store TTC (or Net if no Tva)
         };
       });
       setSales(initialSales);
 
       // Initialize Inventory from Current Global Ingredients State
       setInventory(ingredients.map(ing => ({
         ingredientId: ing.id,
         startStock: ing.quantity, 
         purchasedQuantity: 0,
         endStock: ing.quantity 
       })));
     }
@@ -159,102 +158,113 @@ export const MonthlyReport: React.FC<Props> = ({
   let totalRevenueHT = 0;
   let totalTvaCollected = 0;
 
   if (isTva) {
     sales.forEach(s => {
       const p = products.find(prod => prod.id === s.productId);
       const tvaRate = p?.tvaRate ?? settings.defaultTvaRate ?? 0;
       const lineTTC = s.quantitySold * s.actualPrice;
       const lineHT = lineTTC / (1 + tvaRate/100);
       totalRevenueHT += lineHT;
       totalTvaCollected += (lineTTC - lineHT);
     });
   } else {
     totalRevenueHT = totalRevenueTTC; // Franchise base, revenue is the total
     totalTvaCollected = 0;
   }
 
   // 2. Variable Costs
   // Method 1: Calculated Theoretical
   const calculatedFoodCost = sales.reduce((sum, s) => {
     const product = products.find(p => p.id === s.productId);
     const recipe = recipes.find(r => r.id === product?.recipeId);
     if (!product || !recipe) return sum;
 
     const batchCost = calculateRecipeMaterialCost(recipe, ingredients);
-    const unitCost = batchCost / (recipe.batchYield || 1);
+    const unitCost = batchCost / (recipe.batchYield ?? 1);
     
-    let safeLossRate = product.lossRate;
-    if (safeLossRate >= 100) safeLossRate = 99.9;
-    const mfgLossMultiplier = 1 / (1 - safeLossRate / 100);
+    const mfgLossMultiplier = 1 / (1 - product.lossRate / 100);
 
     const totalUnits = s.quantitySold + (s.quantityUnsold || 0);
     return sum + (unitCost * mfgLossMultiplier * totalUnits);
   }, 0);
 
   // Method 3: Inventory Variation
   const inventoryVariationCost = inventory.reduce((sum, item) => {
     const ing = ingredients.find(i => i.id === item.ingredientId);
     if (!ing) return sum;
     const usedQty = item.startStock + item.purchasedQuantity - item.endStock;
     let unitMultiplier = 1;
     if (ing.unit === Unit.KG || ing.unit === Unit.L) unitMultiplier = 1000;
     const pricePerStockUnit = ing.costPerBaseUnit * unitMultiplier;
     return sum + (usedQty * pricePerStockUnit);
   }, 0);
 
   // Selection
   let finalFoodCost = 0;
   if (costMode === 0) finalFoodCost = calculatedFoodCost;
   else if (costMode === 1) finalFoodCost = actualIngredientSpend;
   else finalFoodCost = inventoryVariationCost;
 
   // Packaging
   const totalPackagingCost = sales.reduce((sum, s) => {
     const product = products.find(p => p.id === s.productId);
     if (!product) return sum;
-    let safeLossRate = product.lossRate;
-    if (safeLossRate >= 100) safeLossRate = 99.9;
-    const mfgLossMultiplier = 1 / (1 - safeLossRate / 100);
+    const mfgLossMultiplier = 1 / (1 - product.lossRate / 100);
     const totalPackagedUnits = s.quantitySold + (product.packagingUsedOnUnsold ? (s.quantityUnsold || 0) : 0);
     return sum + (product.packagingCost * totalPackagedUnits * mfgLossMultiplier);
   }, 0);
 
   // 3. Social Charges
   // Logic: Social charges are calculated on Revenue.
   // If isTvaSubject => On Revenue HT.
   // If !isTvaSubject => On Revenue Total.
   const baseForSocialCharges = totalRevenueHT; 
   const totalSocialCharges = baseForSocialCharges * (settings.taxRate / 100);
 
   // 4. Result
   const totalVariableCosts = finalFoodCost + totalPackagingCost + totalSocialCharges;
   const grossMargin = totalRevenueHT - totalVariableCosts; // Margin on HT
   const totalActualFixedCosts = actualFixedItems.reduce((sum, i) => sum + i.amount, 0);
   const netResult = grossMargin - totalActualFixedCosts;
 
+  const isSalesValid = sales.every(s =>
+    isNonNegativeNumber(s.quantitySold) &&
+    isNonNegativeNumber(s.quantityUnsold) &&
+    isNonNegativeNumber(s.actualPrice)
+  );
+  const isInventoryValid = inventory.every(item =>
+    isNonNegativeNumber(item.startStock) &&
+    isNonNegativeNumber(item.purchasedQuantity) &&
+    isNonNegativeNumber(item.endStock)
+  );
+  const isFixedCostsValid = actualFixedItems.every(item => isNonNegativeNumber(item.amount));
+  const isIngredientSpendValid = isNonNegativeNumber(actualIngredientSpend);
+  const canSaveReport = isSalesValid && isInventoryValid && isFixedCostsValid && isIngredientSpendValid;
+
   const saveReport = () => {
+    if (!canSaveReport) return;
     const report: MonthlyReportData = {
       id: selectedMonth,
       monthStr: selectedMonth,
       sales,
       actualFixedCostItems: actualFixedItems,
       actualIngredientSpend,
       inventory,
       totalRevenue: totalRevenueTTC, // Storing TTC as total revenue reference
       netResult,
       isLocked: true
     };
     
     // Save to App state
     const others = savedReports.filter(r => r.monthStr !== selectedMonth);
     setSavedReports([...others, report]);
     
     // Trigger download
     const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
     const url = URL.createObjectURL(blob);
     const a = document.createElement('a');
     a.href = url;
     a.download = `bilan_milena_${selectedMonth}.json`;
     a.click();
 
     alert('Bilan sauvegard√© et t√©l√©charg√© !');
@@ -305,151 +315,182 @@ export const MonthlyReport: React.FC<Props> = ({
               if (!p) return null;
               
               // Warning logic
               const realSold = orders
                   .filter(o => o.date.startsWith(selectedMonth) && o.status !== 'cancelled')
                   .reduce((sum, o) => sum + (o.items.find(i=>i.productId === p.id)?.quantity || 0), 0);
                   
               const realProd = productionBatches
                   .filter(b => b.date.startsWith(selectedMonth) && b.productId === p.id)
                   .reduce((sum, b) => sum + b.quantity, 0);
                   
               const manualEditWarning = s.quantitySold !== realSold || s.quantityUnsold !== Math.max(0, realProd - realSold);
 
               return (
                 <div key={s.productId} className={`p-3 border rounded-lg ${manualEditWarning ? 'bg-orange-50 border-orange-200 dark:bg-orange-900/10' : 'bg-stone-50 border-stone-200 dark:bg-stone-900 dark:border-stone-700'}`}>
                   <div className="flex justify-between items-center mb-2">
                       <div className="font-medium text-stone-700 dark:text-stone-300 text-sm">{p.name}</div>
                       {manualEditWarning && <InfoTooltip text={`Donn√©es r√©elles: ${realSold} vendus, ${Math.max(0, realProd - realSold)} invendus. Vous avez modifi√© ces valeurs.`} />}
                   </div>
                   <div className="flex gap-2">
                     <Input 
                       className="flex-1"
                       label="Vendus" 
                       type="number" 
                       value={s.quantitySold}
+                      error={isNonNegativeNumber(s.quantitySold) ? undefined : '‚â• 0'}
                       onChange={e => handleSaleChange(s.productId, 'quantitySold', parseFloat(e.target.value))}
                     />
                     <Input 
                       className="w-20"
                       label="Invendus" 
                       type="number" 
                       value={s.quantityUnsold}
+                      error={isNonNegativeNumber(s.quantityUnsold) ? undefined : '‚â• 0'}
                       onChange={e => handleSaleChange(s.productId, 'quantityUnsold', parseFloat(e.target.value))}
                     />
                     <Input 
                       className="w-24"
                       label={`Prix ${isTva ? 'TTC' : ''}`} 
                       type="number" 
                       suffix="‚Ç¨"
                       value={s.actualPrice}
+                      error={isNonNegativeNumber(s.actualPrice) ? undefined : '‚â• 0'}
                       onChange={e => handleSaleChange(s.productId, 'actualPrice', parseFloat(e.target.value))}
                     />
                   </div>
                 </div>
               );
             })}
           </div>
         </Card>
 
         {/* ... (Stock section remains same) ... */}
         <Card>
            <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 font-serif">2. Gestion des Stocks (Ingr√©dients)</h3>
            <p className="text-xs text-stone-500 dark:text-stone-400 mb-4">Mettez √† jour vos stocks pour calculer la consommation r√©elle.</p>
            <div className="overflow-x-auto border border-stone-200 dark:border-stone-700 rounded-lg">
              <table className="w-full text-xs text-left">
                <thead className="bg-stone-100 dark:bg-stone-900 font-bold text-stone-700 dark:text-stone-300">
                  <tr>
                    <th className="p-2">Ingr√©dient</th>
                    <th className="p-2">D√©but</th>
                    <th className="p-2">Achats</th>
                    <th className="p-2">Fin (R√©el)</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-stone-100 dark:divide-stone-700">
                  {inventory.map(item => {
                    const ing = ingredients.find(i => i.id === item.ingredientId);
                    if(!ing) return null;
                    return (
                      <tr key={item.ingredientId} className="dark:text-stone-300">
                        <td className="p-2 truncate max-w-[80px] font-medium">{ing.name} <span className="text-stone-400 dark:text-stone-500">({ing.unit})</span></td>
                        <td className="p-2">
-                         <input type="number" className="w-12 bg-transparent focus:outline-none" value={item.startStock} onChange={e => handleInventoryChange(item.ingredientId, 'startStock', parseFloat(e.target.value))} />
+                         <input
+                           type="number"
+                           className={`w-12 bg-transparent focus:outline-none ${isNonNegativeNumber(item.startStock) ? '' : 'border border-red-400 rounded'}`}
+                           value={item.startStock}
+                           onChange={e => handleInventoryChange(item.ingredientId, 'startStock', parseFloat(e.target.value))}
+                         />
                        </td>
                        <td className="p-2">
-                         <input type="number" className="w-12 bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-600 rounded px-1 text-stone-800 dark:text-stone-200" value={item.purchasedQuantity} onChange={e => handleInventoryChange(item.ingredientId, 'purchasedQuantity', parseFloat(e.target.value))} />
+                         <input
+                           type="number"
+                           className={`w-12 bg-stone-50 dark:bg-stone-800 border rounded px-1 text-stone-800 dark:text-stone-200 ${isNonNegativeNumber(item.purchasedQuantity) ? 'border-stone-200 dark:border-stone-600' : 'border-red-400'}`}
+                           value={item.purchasedQuantity}
+                           onChange={e => handleInventoryChange(item.ingredientId, 'purchasedQuantity', parseFloat(e.target.value))}
+                         />
                        </td>
                        <td className="p-2">
-                         <input type="number" className="w-12 bg-white dark:bg-stone-800 border border-rose-200 dark:border-rose-900 rounded px-1 font-bold text-rose-700 dark:text-rose-400" value={item.endStock} onChange={e => handleInventoryChange(item.ingredientId, 'endStock', parseFloat(e.target.value))} />
+                         <input
+                           type="number"
+                           className={`w-12 bg-white dark:bg-stone-800 border rounded px-1 font-bold text-rose-700 dark:text-rose-400 ${isNonNegativeNumber(item.endStock) ? 'border-rose-200 dark:border-rose-900' : 'border-red-400'}`}
+                           value={item.endStock}
+                           onChange={e => handleInventoryChange(item.ingredientId, 'endStock', parseFloat(e.target.value))}
+                         />
                        </td>
                      </tr>
                    )
                  })}
                </tbody>
              </table>
            </div>
         </Card>
 
         <Card>
           <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4 font-serif">3. D√©penses & Charges</h3>
           <div className="space-y-4 mb-6">
             <h4 className="text-sm font-bold text-stone-600 dark:text-stone-400 border-b border-stone-100 dark:border-stone-700 pb-1">Charges Fixes R√©elles</h4>
             {actualFixedItems.map(item => (
               <div key={item.id} className="flex justify-between items-center text-sm text-stone-600 dark:text-stone-300">
                 <span>{item.name}</span>
                 <input 
                   type="number" 
-                  className="w-20 text-right bg-stone-50 dark:bg-stone-800 border border-stone-200 dark:border-stone-700 rounded px-1 py-0.5"
+                  className={`w-20 text-right bg-stone-50 dark:bg-stone-800 border rounded px-1 py-0.5 ${isNonNegativeNumber(item.amount) ? 'border-stone-200 dark:border-stone-700' : 'border-red-400'}`}
                   value={item.amount}
                   onChange={e => handleFixedItemChange(item.id, parseFloat(e.target.value))}
                 />
               </div>
             ))}
           </div>
 
           <div className="pt-4 border-t border-stone-100 dark:border-stone-700">
              <label className="text-sm font-bold text-stone-700 dark:text-stone-300 block mb-2">M√©thode Co√ªt Mati√®res</label>
              <div className="flex flex-col gap-2">
                <button onClick={() => setCostMode(0)} className={`text-left px-3 py-2 rounded text-sm border ${costMode === 0 ? 'bg-rose-50 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-300 font-bold' : 'bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 text-stone-700 dark:text-stone-300'}`}>
                  1. Th√©orique (Recettes + Pertes) <span className="float-right">{formatCurrency(calculatedFoodCost)}</span>
                </button>
                <button onClick={() => setCostMode(2)} className={`text-left px-3 py-2 rounded text-sm border ${costMode === 2 ? 'bg-rose-50 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-300 font-bold' : 'bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 text-stone-700 dark:text-stone-300'}`}>
                  2. R√©el (Variation Stock) <span className="float-right">{formatCurrency(inventoryVariationCost)}</span>
                </button>
                <button onClick={() => setCostMode(1)} className={`text-left px-3 py-2 rounded text-sm border ${costMode === 1 ? 'bg-rose-50 dark:bg-rose-900/30 border-rose-200 dark:border-rose-800 text-rose-800 dark:text-rose-300 font-bold' : 'bg-white dark:bg-stone-800 border-stone-200 dark:border-stone-700 text-stone-700 dark:text-stone-300'}`}>
                  3. Total D√©penses (Factures)
                  {costMode === 1 ? (
-                   <input type="number" className="ml-2 w-20 text-right border-b border-rose-300 dark:border-rose-700 bg-transparent" value={actualIngredientSpend} onClick={e => e.stopPropagation()} onChange={e => setActualIngredientSpend(parseFloat(e.target.value))} />
+                   <input
+                     type="number"
+                     className={`ml-2 w-20 text-right border-b bg-transparent ${isNonNegativeNumber(actualIngredientSpend) ? 'border-rose-300 dark:border-rose-700' : 'border-red-400'}`}
+                     value={actualIngredientSpend}
+                     onClick={e => e.stopPropagation()}
+                     onChange={e => setActualIngredientSpend(parseFloat(e.target.value))}
+                   />
                  ) : (
                    <span className="float-right">{formatCurrency(actualIngredientSpend)}</span>
                  )}
                </button>
              </div>
           </div>
         </Card>
 
-        <Button className="w-full shadow-lg" onClick={saveReport}>Sauvegarder ce Bilan</Button>
+        <div className="space-y-2">
+          {!canSaveReport && (
+            <p className="text-xs text-red-500">Corrigez les valeurs n√©gatives avant de sauvegarder.</p>
+          )}
+          <Button className="w-full shadow-lg" onClick={saveReport} disabled={!canSaveReport}>
+            Sauvegarder ce Bilan
+          </Button>
+        </div>
       </div>
 
       {/* Report Output */}
       <div className="lg:col-span-7">
         <Card className="h-full border-rose-100 dark:border-stone-700 shadow-xl bg-white dark:bg-stone-800 print:border-none print:shadow-none">
           <div className="flex justify-between items-start mb-6 border-b border-stone-100 dark:border-stone-700 pb-4">
             <div>
               <h2 className="text-3xl font-bold text-rose-950 dark:text-rose-100 font-serif">Bilan Mensuel</h2>
               <p className="text-stone-500 dark:text-stone-400">{new Date(selectedMonth).toLocaleDateString('fr-FR', { month: 'long', year: 'numeric' })}</p>
               {isTva && <span className="inline-block mt-1 px-2 py-0.5 rounded text-[10px] bg-rose-100 dark:bg-rose-900/40 text-rose-800 dark:text-rose-300 font-bold uppercase tracking-wider">Mode Assujetti TVA</span>}
             </div>
             <div className="text-right no-print">
               <Button size="sm" variant="secondary" onClick={() => window.print()}>üñ®Ô∏è Imprimer</Button>
             </div>
           </div>
 
           <div className="space-y-0 text-sm">
             {/* Revenue */}
             <div className="py-4 border-b border-stone-100 dark:border-stone-700">
               <div className="flex justify-between items-center mb-1">
                  <span className="font-bold text-lg text-stone-700 dark:text-stone-300">Chiffre d'Affaires {isTva ? '(TTC)' : ''}</span>
                  <span className="font-bold text-xl text-stone-900 dark:text-stone-100">{formatCurrency(totalRevenueTTC)}</span>
               </div>
               {isTva && (
                 <div className="text-xs text-stone-500 dark:text-stone-400 flex flex-col gap-1 pl-2 border-l-2 border-stone-200 dark:border-stone-600 mt-2">
diff --git a/components/views/Orders.tsx b/components/views/Orders.tsx
index 0703fa9583e4ad8f12df682d599a0a1710928745..dbafd21c866a46bd9cc59084f8058b4127a00a80 100644
--- a/components/views/Orders.tsx
+++ b/components/views/Orders.tsx
@@ -1,44 +1,46 @@
 
 import React, { useState } from 'react';
-import { Order, Product, OrderItem, ProductionBatch } from '../../types';
-import { Card, Button, Input, Select, InfoTooltip } from '../ui/Common';
+import { Order, Product, ProductionBatch } from '../../types';
+import { Card, Button, Input, InfoTooltip } from '../ui/Common';
+import { isPositiveNumber, parseOptionalNumber } from '../../validation';
 
 interface Props {
   orders: Order[];
   setOrders: React.Dispatch<React.SetStateAction<Order[]>>;
   products: Product[];
   productionBatches: ProductionBatch[];
   setProductionBatches: React.Dispatch<React.SetStateAction<ProductionBatch[]>>;
 }
 
 export const Orders: React.FC<Props> = ({ orders, setOrders, products, productionBatches, setProductionBatches }) => {
   const [newOrder, setNewOrder] = useState<Partial<Order>>({ customerName: '', date: new Date().toISOString().split('T')[0], items: [], status: 'pending' });
-  const [currentItem, setCurrentItem] = useState<{ productId: string, quantity: number }>({ productId: '', quantity: 1 });
+  const [currentItem, setCurrentItem] = useState<{ productId: string, quantity?: number }>({ productId: '', quantity: 1 });
+  const isCurrentItemQuantityValid = isPositiveNumber(currentItem.quantity);
 
   const addItemToOrder = () => {
-    if (!currentItem.productId || currentItem.quantity <= 0) return;
+    if (!currentItem.productId || !isCurrentItemQuantityValid) return;
     const existing = (newOrder.items || []).find(i => i.productId === currentItem.productId);
     
     let updatedItems;
     if (existing) {
       updatedItems = (newOrder.items || []).map(i => i.productId === currentItem.productId ? { ...i, quantity: i.quantity + currentItem.quantity } : i);
     } else {
       updatedItems = [...(newOrder.items || []), { ...currentItem }];
     }
     
     setNewOrder({ ...newOrder, items: updatedItems });
     setCurrentItem({ productId: '', quantity: 1 });
   };
 
   const saveOrder = () => {
     if (!newOrder.customerName || !newOrder.date || !newOrder.items?.length) return;
     
     setOrders([...orders, {
       id: Date.now().toString(),
       customerName: newOrder.customerName,
       date: newOrder.date,
       items: newOrder.items,
       status: 'pending',
       notes: newOrder.notes
     }]);
     
@@ -121,54 +123,54 @@ export const Orders: React.FC<Props> = ({ orders, setOrders, products, productio
               placeholder="Ex: Sophie Martin"
               value={newOrder.customerName} 
               onChange={e => setNewOrder({...newOrder, customerName: e.target.value})} 
             />
             <Input 
               label="Date de livraison" 
               type="date"
               value={newOrder.date} 
               onChange={e => setNewOrder({...newOrder, date: e.target.value})} 
             />
             
             <div className="p-4 bg-stone-50 dark:bg-stone-900 rounded-lg border border-stone-200 dark:border-stone-700">
               <h4 className="text-sm font-bold text-stone-700 dark:text-stone-300 mb-2">Ajouter des produits</h4>
               <div className="flex gap-2 mb-2">
                 <select 
                   className="flex-1 px-2 py-2 rounded border border-stone-300 dark:border-stone-600 bg-white dark:bg-stone-800 dark:text-stone-100 text-sm focus:outline-none focus:ring-2 focus:ring-rose-200"
                   value={currentItem.productId}
                   onChange={e => setCurrentItem({...currentItem, productId: e.target.value})}
                 >
                   <option value="">Produit...</option>
                   {products.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}
                 </select>
                 <input 
                   type="number" 
                   className="w-16 px-2 py-2 rounded border border-stone-300 dark:border-stone-600 bg-white dark:bg-stone-800 dark:text-stone-100 text-sm focus:outline-none focus:ring-2 focus:ring-rose-200"
-                  value={currentItem.quantity}
-                  onChange={e => setCurrentItem({...currentItem, quantity: parseFloat(e.target.value)})}
+                  value={currentItem.quantity ?? ''}
+                  onChange={e => setCurrentItem({...currentItem, quantity: parseOptionalNumber(e.target.value)})}
                 />
-                <Button size="sm" onClick={addItemToOrder}>+</Button>
+                <Button size="sm" onClick={addItemToOrder} disabled={!currentItem.productId || !isCurrentItemQuantityValid}>+</Button>
               </div>
 
               <div className="space-y-1 mt-3">
                 {(newOrder.items || []).map((item, idx) => {
                   const p = products.find(p => p.id === item.productId);
                   return (
                     <div key={idx} className="flex justify-between text-sm bg-white dark:bg-stone-800 p-2 rounded border border-stone-100 dark:border-stone-700">
                       <span className="dark:text-stone-300">{p?.name}</span>
                       <span className="font-bold dark:text-stone-200">x {item.quantity}</span>
                     </div>
                   );
                 })}
               </div>
             </div>
 
             <Input 
               label="Notes" 
               placeholder="Allergies, message sp√©cial..."
               value={newOrder.notes || ''} 
               onChange={e => setNewOrder({...newOrder, notes: e.target.value})} 
             />
 
             <Button className="w-full mt-2" onClick={saveOrder} disabled={!newOrder.items?.length || !newOrder.customerName}>
               Enregistrer la commande
             </Button>
diff --git a/components/views/Production.tsx b/components/views/Production.tsx
index 4586c63c67e2ac25c6b9c5d752adc0d3cd2902b8..41f9cf3991480dce8d7fd78759851d8306ef91cd 100644
--- a/components/views/Production.tsx
+++ b/components/views/Production.tsx
@@ -1,45 +1,47 @@
 
 import React, { useState, useMemo } from 'react';
 import { ProductionBatch, Product, Order } from '../../types';
-import { Card, Button, Input, Select, InfoTooltip } from '../ui/Common';
+import { Card, Button, Input } from '../ui/Common';
+import { isPositiveNumber, parseOptionalNumber } from '../../validation';
 
 interface Props {
   productionBatches: ProductionBatch[];
   setProductionBatches: React.Dispatch<React.SetStateAction<ProductionBatch[]>>;
   products: Product[];
   orders?: Order[];
 }
 
 export const Production: React.FC<Props> = ({ productionBatches, setProductionBatches, products, orders = [] }) => {
   const [newBatch, setNewBatch] = useState<Partial<ProductionBatch>>({
     date: new Date().toISOString().split('T')[0],
     quantity: 0
   });
+  const isBatchQuantityValid = isPositiveNumber(newBatch.quantity);
 
   const handleAddBatch = () => {
-    if (!newBatch.productId || !newBatch.quantity) return;
+    if (!newBatch.productId || !isBatchQuantityValid) return;
     setProductionBatches([
       {
         id: Date.now().toString(),
         date: newBatch.date || new Date().toISOString().split('T')[0],
         productId: newBatch.productId,
         quantity: Number(newBatch.quantity)
       },
       ...productionBatches
     ]);
     setNewBatch({ ...newBatch, quantity: 0 });
   };
 
   const handleDeleteBatch = (id: string) => {
     setProductionBatches(productionBatches.filter(b => b.id !== id));
   };
 
   // Calculate Alerts
   const productionAlerts = useMemo(() => {
     const alerts: { productId: string; produced: number; delivered: number; diff: number }[] = [];
     
     products.forEach(p => {
         const totalDelivered = orders
             .filter(o => o.status === 'completed')
             .reduce((sum, o) => {
                 const item = o.items.find(i => i.productId === p.id);
@@ -93,56 +95,57 @@ export const Production: React.FC<Props> = ({ productionBatches, setProductionBa
             <p className="text-sm text-stone-500 mb-4">Notez ici ce que vous sortez du four. Cela d√©duira automatiquement les ingr√©dients du stock.</p>
             
             <div className="space-y-4">
                 <Input 
                 label="Date" 
                 type="date"
                 value={newBatch.date} 
                 onChange={e => setNewBatch({...newBatch, date: e.target.value})} 
                 />
                 
                 <div className="flex flex-col gap-1.5">
                 <label className="text-sm font-bold text-stone-700 dark:text-stone-300">Produit Fabriqu√©</label>
                 <select 
                     className="px-3 py-2.5 rounded-lg border border-stone-300 dark:border-stone-600 text-sm bg-white dark:bg-stone-900 text-stone-900 dark:text-stone-100 focus:outline-none focus:ring-2 focus:ring-rose-100 dark:focus:ring-rose-900 focus:border-[#D45D79] shadow-sm"
                     value={newBatch.productId}
                     onChange={e => setNewBatch({...newBatch, productId: e.target.value})}
                 >
                     <option value="">Choisir un produit...</option>
                     {products.map(p => <option key={p.id} value={p.id}>{p.name}</option>)}
                 </select>
                 </div>
 
                 <Input 
                 label="Quantit√© Produite" 
                 type="number"
-                value={newBatch.quantity} 
-                onChange={e => setNewBatch({...newBatch, quantity: parseFloat(e.target.value)})} 
+                value={newBatch.quantity ?? ''} 
+                onChange={e => setNewBatch({...newBatch, quantity: parseOptionalNumber(e.target.value)})} 
                 helperText="Nombre d'unit√©s (ex: 50 cookies)"
+                error={isBatchQuantityValid ? undefined : '> 0'}
                 />
 
-                <Button onClick={handleAddBatch} disabled={!newBatch.productId || !newBatch.quantity} className="w-full shadow-md">
+                <Button onClick={handleAddBatch} disabled={!newBatch.productId || !isBatchQuantityValid} className="w-full shadow-md">
                 Valider la Production
                 </Button>
             </div>
             </Card>
         </div>
 
         <div className="lg:col-span-8">
             <Card>
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 mb-6">Historique de Production</h3>
             
             <div className="overflow-x-auto">
                 <table className="w-full text-sm text-left">
                 <thead className="bg-stone-100 dark:bg-stone-900 font-bold uppercase text-xs text-stone-600 dark:text-stone-400">
                     <tr>
                     <th className="p-3">Date</th>
                     <th className="p-3">Produit</th>
                     <th className="p-3 text-right">Quantit√©</th>
                     <th className="p-3"></th>
                     </tr>
                 </thead>
                 <tbody className="divide-y divide-stone-100 dark:divide-stone-700">
                     {productionBatches.map(batch => {
                     const prod = products.find(p => p.id === batch.productId);
                     return (
                         <tr key={batch.id} className="hover:bg-stone-50 dark:hover:bg-stone-800">
diff --git a/components/views/Products.tsx b/components/views/Products.tsx
index d230d8bd70e731835da6adc29cd21a05ca385f61..4e9fb1fb764427a3bb48112cc12ef34841ff8e45 100644
--- a/components/views/Products.tsx
+++ b/components/views/Products.tsx
@@ -1,84 +1,103 @@
 
 import React, { useState } from 'react';
-import { Product, Recipe, Ingredient, GlobalSettings } from '../../types';
-import { calculateProductMetrics, formatCurrency } from '../../utils';
+import { Product, Recipe, GlobalSettings } from '../../types';
+import { isNonNegativeNumber, isPercentage, isPositiveNumber, parseOptionalNumber } from '../../validation';
 import { Button, Card, Input, Select, InfoTooltip } from '../ui/Common';
 
 interface Props {
   products: Product[];
   setProducts: React.Dispatch<React.SetStateAction<Product[]>>;
   recipes: Recipe[];
   settings?: GlobalSettings; 
 }
 
 // Default categories + user can type new ones
 const DEFAULT_CATEGORIES = ['G√¢teau', 'Biscuit', 'Entremet', 'Tarte', 'Viennoiserie', 'Autre'];
 
 export const Products: React.FC<Props> = ({ products, setProducts, recipes }) => {
   return (
       <ProductsContent products={products} setProducts={setProducts} recipes={recipes} />
   );
 };
 
 export const ProductsContent: React.FC<Props & { settings?: GlobalSettings }> = ({ products, setProducts, recipes, settings }) => {
   const isTvaEnabled = settings?.isTvaSubject || false;
   const defaultTva = settings?.defaultTvaRate || 5.5;
 
   const [newProduct, setNewProduct] = useState<Partial<Product>>({
     laborTimeMinutes: 15,
     packagingCost: 0.10,
     variableDeliveryCost: 0,
     lossRate: 0, 
     unsoldEstimate: 0, 
     packagingUsedOnUnsold: true, 
     targetMargin: 0,
     estimatedMonthlySales: 0,
     category: 'G√¢teau',
     tvaRate: defaultTva
   });
 
   const [isCustomCategory, setIsCustomCategory] = useState(false);
 
-  const lossRate = newProduct.lossRate ?? 0;
-  const isLossRateValid = !isNaN(lossRate) && lossRate >= 0 && lossRate < 100;
+  const lossRate = newProduct.lossRate;
+  const isLossRateValid = isPercentage(lossRate);
+  const isEstimatedSalesValid = isPositiveNumber(newProduct.estimatedMonthlySales);
+  const isUnsoldEstimateValid = isNonNegativeNumber(newProduct.unsoldEstimate);
+  const isLaborTimeValid = isNonNegativeNumber(newProduct.laborTimeMinutes);
+  const isPackagingCostValid = isNonNegativeNumber(newProduct.packagingCost);
+  const isVariableDeliveryCostValid = isNonNegativeNumber(newProduct.variableDeliveryCost);
+  const isTargetMarginValid = isNonNegativeNumber(newProduct.targetMargin);
+  const isTvaRateValid = !isTvaEnabled || isPercentage(newProduct.tvaRate);
+  const isProductFormValid = Boolean(
+    newProduct.name &&
+    newProduct.recipeId &&
+    isLossRateValid &&
+    isEstimatedSalesValid &&
+    isUnsoldEstimateValid &&
+    isLaborTimeValid &&
+    isPackagingCostValid &&
+    isVariableDeliveryCostValid &&
+    isTargetMarginValid &&
+    isTvaRateValid
+  );
 
   const handleAddProduct = () => {
-    if (!newProduct.name || !newProduct.recipeId || !isLossRateValid) return;
+    if (!isProductFormValid) return;
 
     setProducts([...products, {
       id: Date.now().toString(),
       name: newProduct.name,
       recipeId: newProduct.recipeId,
-      laborTimeMinutes: Number(newProduct.laborTimeMinutes),
-      packagingCost: Number(newProduct.packagingCost),
-      variableDeliveryCost: Number(newProduct.variableDeliveryCost),
-      lossRate: Number(newProduct.lossRate),
-      unsoldEstimate: Number(newProduct.unsoldEstimate),
+      laborTimeMinutes: Number(newProduct.laborTimeMinutes ?? 0),
+      packagingCost: Number(newProduct.packagingCost ?? 0),
+      variableDeliveryCost: Number(newProduct.variableDeliveryCost ?? 0),
+      lossRate: Number(newProduct.lossRate ?? 0),
+      unsoldEstimate: Number(newProduct.unsoldEstimate ?? 0),
       packagingUsedOnUnsold: !!newProduct.packagingUsedOnUnsold,
-      targetMargin: Number(newProduct.targetMargin),
-      estimatedMonthlySales: Number(newProduct.estimatedMonthlySales),
+      targetMargin: Number(newProduct.targetMargin ?? 0),
+      estimatedMonthlySales: Number(newProduct.estimatedMonthlySales ?? 0),
       category: newProduct.category || 'Autre',
       tvaRate: Number(newProduct.tvaRate ?? defaultTva)
     }]);
 
     setNewProduct({
       name: '',
       laborTimeMinutes: 15,
       packagingCost: 0.10,
       variableDeliveryCost: 0,
       lossRate: 0,
       unsoldEstimate: 0,
       packagingUsedOnUnsold: true,
       targetMargin: 0,
       estimatedMonthlySales: 0,
       category: 'G√¢teau',
       recipeId: '',
       tvaRate: defaultTva
     });
     setIsCustomCategory(false);
   };
 
   const handleDeleteProduct = (id: string) => {
     setProducts(products.filter(p => p.id !== id));
   };
 
@@ -132,140 +151,144 @@ export const ProductsContent: React.FC<Props & { settings?: GlobalSettings }> =
                        Liste
                      </Button>
                    </div>
                 </div>
             ) : (
                 <Select
                     label="Cat√©gorie"
                     options={categoryOptions}
                     value={newProduct.category}
                     onChange={(e) => {
                         if (e.target.value === 'custom__') {
                             setIsCustomCategory(true);
                             setNewProduct({...newProduct, category: ''});
                         } else {
                             setNewProduct({...newProduct, category: e.target.value});
                         }
                     }}
                 />
             )}
 
             <div className="p-4 bg-[#FDF8F6] dark:bg-stone-900 rounded-lg border border-rose-100 dark:border-stone-700 grid grid-cols-2 gap-4">
                <Input 
                 label="Ventes / mois" 
                 type="number"
                 suffix="u"
-                value={newProduct.estimatedMonthlySales} 
-                onChange={e => setNewProduct({...newProduct, estimatedMonthlySales: parseFloat(e.target.value)})} 
+                value={newProduct.estimatedMonthlySales ?? ''} 
+                onChange={e => setNewProduct({...newProduct, estimatedMonthlySales: parseOptionalNumber(e.target.value)})} 
                 helperText="Pr√©vision"
+                error={isEstimatedSalesValid ? undefined : '> 0'}
               />
                <Input 
                 label="Invendus est." 
                 type="number"
                 suffix="u"
-                value={newProduct.unsoldEstimate} 
-                onChange={e => setNewProduct({...newProduct, unsoldEstimate: parseFloat(e.target.value)})} 
+                value={newProduct.unsoldEstimate ?? ''} 
+                onChange={e => setNewProduct({...newProduct, unsoldEstimate: parseOptionalNumber(e.target.value)})} 
                 helperText="Pertes produits finis"
+                error={isUnsoldEstimateValid ? undefined : '‚â• 0'}
               />
             </div>
 
             <div className="grid grid-cols-2 gap-4">
               <Input 
                 label="Main d'≈ìuvre" 
                 type="number"
                 suffix="min"
-                value={newProduct.laborTimeMinutes} 
-                onChange={e => setNewProduct({...newProduct, laborTimeMinutes: parseFloat(e.target.value)})} 
+                value={newProduct.laborTimeMinutes ?? ''} 
+                onChange={e => setNewProduct({...newProduct, laborTimeMinutes: parseOptionalNumber(e.target.value)})} 
                 helperText="Temps/unit√©"
+                error={isLaborTimeValid ? undefined : '‚â• 0'}
               />
                <Input 
                 label={`Emballage ${isTvaEnabled ? 'HT' : ''}`}
                 type="number"
                 step="0.01"
                 suffix="‚Ç¨"
-                value={newProduct.packagingCost} 
-                onChange={e => setNewProduct({...newProduct, packagingCost: parseFloat(e.target.value)})} 
+                value={newProduct.packagingCost ?? ''} 
+                onChange={e => setNewProduct({...newProduct, packagingCost: parseOptionalNumber(e.target.value)})} 
+                error={isPackagingCostValid ? undefined : '‚â• 0'}
               />
             </div>
             
             <div className="flex items-center gap-2">
               <input 
                 type="checkbox" 
                 id="packagingOnUnsold"
                 className="w-4 h-4 text-rose-600 rounded focus:ring-rose-500"
                 checked={newProduct.packagingUsedOnUnsold}
                 onChange={e => setNewProduct({...newProduct, packagingUsedOnUnsold: e.target.checked})}
               />
               <label htmlFor="packagingOnUnsold" className="text-sm text-stone-600 dark:text-stone-400 cursor-pointer">
                 L'emballage est perdu si invendu ? 
                 <span className="block text-xs text-stone-400 dark:text-stone-500">Si non coch√©, le co√ªt emballage ne s'applique pas aux invendus.</span>
               </label>
             </div>
 
             <div className="grid grid-cols-2 gap-4">
               <div className="flex flex-col gap-1">
                 <Input 
                   label="Perte Fab." 
                   type="number"
                   suffix="%"
-                  min={0}
-                  max={99.9}
-                  value={newProduct.lossRate} 
-                  onChange={e => setNewProduct({...newProduct, lossRate: parseFloat(e.target.value)})} 
+                  value={newProduct.lossRate ?? ''} 
+                  onChange={e => setNewProduct({...newProduct, lossRate: parseOptionalNumber(e.target.value)})} 
                   error={!isLossRateValid ? "< 100%" : undefined}
                 />
                 <div className="text-[10px] text-stone-400 dark:text-stone-500 leading-tight">
                   % p√¢te/g√¢teaux rat√©s (fabrication).
                 </div>
               </div>
               <Input 
                 label="Marge cible" 
                 type="number"
                 step="0.10"
                 suffix="‚Ç¨"
-                value={newProduct.targetMargin} 
-                onChange={e => setNewProduct({...newProduct, targetMargin: parseFloat(e.target.value)})} 
+                value={newProduct.targetMargin ?? ''} 
+                onChange={e => setNewProduct({...newProduct, targetMargin: parseOptionalNumber(e.target.value)})} 
                 helperText="Profit net souhait√©"
+                error={isTargetMarginValid ? undefined : '‚â• 0'}
               />
             </div>
 
             {isTvaEnabled && (
                <Input 
                 label="Taux TVA" 
                 type="number"
                 step="0.1"
                 suffix="%"
-                value={newProduct.tvaRate} 
-                onChange={e => setNewProduct({...newProduct, tvaRate: parseFloat(e.target.value)})} 
+                value={newProduct.tvaRate ?? ''} 
+                onChange={e => setNewProduct({...newProduct, tvaRate: parseOptionalNumber(e.target.value)})} 
                 helperText={`Par d√©faut: ${defaultTva}%`}
+                error={isTvaRateValid ? undefined : '< 100%'}
               />
             )}
 
             <Button 
               className="w-full mt-4 py-3 shadow-md" 
               onClick={handleAddProduct} 
-              disabled={!newProduct.name || !newProduct.recipeId || !isLossRateValid}
+              disabled={!isProductFormValid}
             >
               Ajouter au Catalogue
             </Button>
           </div>
         </Card>
       </div>
 
       {/* List */}
       <div className="lg:col-span-8 space-y-6">
         <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 font-serif">Catalogue ({products.length})</h3>
         
         {products.length === 0 ? (
           <div className="bg-stone-50 dark:bg-stone-900 border border-dashed border-stone-300 dark:border-stone-700 rounded-xl p-12 text-center">
             <p className="text-stone-500 dark:text-stone-400 mb-2">Votre catalogue est vide.</p>
             <p className="text-sm text-stone-400 dark:text-stone-500">Cr√©ez votre premier produit en utilisant le formulaire √† gauche.</p>
           </div>
         ) : (
           <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
             {products.map(product => {
               const recipe = recipes.find(r => r.id === product.recipeId);
               const tvaDisplay = isTvaEnabled ? `(TVA ${product.tvaRate ?? defaultTva}%)` : '';
               
               return (
                 <Card key={product.id} className="hover:border-rose-300 dark:hover:border-rose-700 transition-colors group flex flex-col h-full">
                   <div className="flex justify-between items-start mb-3">
diff --git a/components/views/Settings.tsx b/components/views/Settings.tsx
index 69d6d638b9e0231aaec09b1e4ca2e19969a6bc94..3a4e96f25cb6d71378c19d55490338e0a3a3cb56 100644
--- a/components/views/Settings.tsx
+++ b/components/views/Settings.tsx
@@ -1,49 +1,63 @@
 
 import React, { useState } from 'react';
 import { GlobalSettings, FixedCostItem } from '../../types';
 import { Card, Input, Button, InfoTooltip } from '../ui/Common';
 import { formatCurrency } from '../../utils';
+import { isNonNegativeNumber, isPercentage, isPositiveNumber, parseOptionalNumber } from '../../validation';
 
 interface Props {
   settings: GlobalSettings;
   setSettings: React.Dispatch<React.SetStateAction<GlobalSettings>>;
 }
 
 export const Settings: React.FC<Props> = ({ settings, setSettings }) => {
   const [newCost, setNewCost] = useState({ name: '', amount: '' });
+  const newCostAmount = parseOptionalNumber(newCost.amount);
+  const isNewCostAmountValid = isPositiveNumber(newCostAmount);
+  const isNewCostFormValid = Boolean(newCost.name && isNewCostAmountValid);
+
+  const isTaxRateValid = isPercentage(settings.taxRate);
+  const isDefaultTvaRateValid = isPercentage(settings.defaultTvaRate);
+  const isHourlyRateValid = isNonNegativeNumber(settings.hourlyRate);
 
   const handleChange = (key: keyof GlobalSettings, value: any) => {
     setSettings(prev => ({ ...prev, [key]: value }));
   };
 
+  const handleNumberChange = (key: keyof GlobalSettings, value: string) => {
+    const parsed = parseOptionalNumber(value);
+    if (parsed === undefined) return;
+    handleChange(key, parsed);
+  };
+
   const handleAddCost = () => {
-    if (!newCost.name || !newCost.amount) return;
+    if (!isNewCostFormValid) return;
     const item: FixedCostItem = {
       id: Date.now().toString(),
       name: newCost.name,
-      amount: parseFloat(newCost.amount)
+      amount: Number(newCostAmount)
     };
     setSettings(prev => ({
       ...prev,
       fixedCostItems: [...prev.fixedCostItems, item]
     }));
     setNewCost({ name: '', amount: '' });
   };
 
   const removeCost = (id: string) => {
     setSettings(prev => ({
       ...prev,
       fixedCostItems: prev.fixedCostItems.filter(i => i.id !== id)
     }));
   };
 
   const totalFixedCosts = settings.fixedCostItems.reduce((sum, i) => sum + i.amount, 0);
 
   return (
     <div className="max-w-4xl mx-auto space-y-8">
       <div className="mb-6">
         <h2 className="text-3xl font-bold text-rose-950 dark:text-rose-100 font-serif">Param√®tres de l'activit√©</h2>
         <p className="text-stone-500 dark:text-stone-400 mt-2">Configuration globale pour vos calculs.</p>
       </div>
 
       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
@@ -61,101 +75,107 @@ export const Settings: React.FC<Props> = ({ settings, setSettings }) => {
                       id="toggle" 
                       className="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white dark:bg-stone-300 border-4 appearance-none cursor-pointer" 
                       checked={settings.isTvaSubject}
                       onChange={e => handleChange('isTvaSubject', e.target.checked)}
                       style={{ right: settings.isTvaSubject ? '0' : 'auto', left: settings.isTvaSubject ? 'auto' : '0', borderColor: settings.isTvaSubject ? '#D45D79' : '#ccc' }}
                     />
                     <label 
                       htmlFor="toggle" 
                       className={`toggle-label block overflow-hidden h-6 rounded-full cursor-pointer ${settings.isTvaSubject ? 'bg-[#D45D79]' : 'bg-stone-300 dark:bg-stone-600'}`}
                     ></label>
                 </div>
               </div>
               <p className="text-xs text-stone-500 dark:text-stone-400">
                 {settings.isTvaSubject 
                   ? "Vos prix d'achat sont consid√©r√©s HT. Vos prix de vente incluent la TVA." 
                   : "Franchise de TVA. Vos prix d'achat sont TTC. Pas de TVA sur vos ventes."}
               </p>
             </div>
 
             {settings.isTvaSubject && (
               <Input
                 label="Taux de TVA par d√©faut"
                 type="number"
                 suffix="%"
                 value={settings.defaultTvaRate}
-                onChange={e => handleChange('defaultTvaRate', parseFloat(e.target.value))}
+                onChange={e => handleNumberChange('defaultTvaRate', e.target.value)}
                 helperText="G√©n√©ralement 5.5% pour l'alimentaire."
+                error={isDefaultTvaRateValid ? undefined : '< 100%'}
               />
             )}
 
             <div className="border-t border-stone-100 dark:border-stone-700 pt-4">
               <Input
                 label="Charges Sociales (URSSAF)"
                 type="number"
                 suffix="%"
                 value={settings.taxRate}
-                onChange={e => handleChange('taxRate', parseFloat(e.target.value))}
+                onChange={e => handleNumberChange('taxRate', e.target.value)}
                 helperText={settings.isTvaSubject 
                   ? "Pourcentage pr√©lev√© sur votre CA Hors Taxe." 
                   : "Pourcentage pr√©lev√© sur votre CA Total."}
+                error={isTaxRateValid ? undefined : '< 100%'}
               />
             </div>
 
             <Input
               label="Taux horaire cible"
               type="number"
               suffix="‚Ç¨/h"
               value={settings.hourlyRate}
-              onChange={e => handleChange('hourlyRate', parseFloat(e.target.value))}
+              onChange={e => handleNumberChange('hourlyRate', e.target.value)}
               helperText="Pour estimer le co√ªt de votre temps de travail."
+              error={isHourlyRateValid ? undefined : '‚â• 0'}
             />
           </div>
         </Card>
 
         <Card>
           <div className="flex justify-between items-center mb-6 border-b border-stone-200 dark:border-stone-700 pb-2">
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100">Charges Fixes Mensuelles</h3>
             <span className="text-xl font-bold text-[#D45D79] dark:text-rose-400">{formatCurrency(totalFixedCosts)}</span>
           </div>
           
           <div className="space-y-4 mb-6">
              <div className="space-y-2 max-h-60 overflow-y-auto pr-2">
                {settings.fixedCostItems.map(item => (
                  <div key={item.id} className="flex justify-between items-center bg-stone-50 dark:bg-stone-900 p-3 rounded-lg border border-stone-200 dark:border-stone-700">
                    <span className="font-medium text-stone-700 dark:text-stone-300">{item.name}</span>
                    <div className="flex items-center gap-3">
                      <span className="font-bold text-stone-900 dark:text-stone-100">{formatCurrency(item.amount)}</span>
                      <button onClick={() => removeCost(item.id)} className="text-stone-400 hover:text-red-500 dark:hover:text-red-400">√ó</button>
                    </div>
                  </div>
                ))}
                {settings.fixedCostItems.length === 0 && <p className="text-stone-400 italic text-sm">Aucune charge fixe d√©finie.</p>}
              </div>
           </div>
 
           <div className="p-4 bg-[#FDF8F6] dark:bg-stone-900 rounded-lg border border-rose-100 dark:border-stone-700">
             <h4 className="text-sm font-bold text-rose-900 dark:text-rose-200 mb-3">Ajouter une charge {settings.isTvaSubject ? 'HT' : ''}</h4>
             <div className="flex gap-2 mb-2">
               <input 
                 className="flex-1 px-3 py-2 rounded border border-rose-200 dark:border-stone-600 bg-white dark:bg-stone-800 dark:text-stone-100 text-sm focus:outline-none focus:border-[#D45D79]"
                 placeholder="Ex: Assurance"
                 value={newCost.name}
                 onChange={e => setNewCost({...newCost, name: e.target.value})}
               />
               <input 
                 className="w-24 px-3 py-2 rounded border border-rose-200 dark:border-stone-600 bg-white dark:bg-stone-800 dark:text-stone-100 text-sm focus:outline-none focus:border-[#D45D79]"
                 placeholder="‚Ç¨"
                 type="number"
                 value={newCost.amount}
                 onChange={e => setNewCost({...newCost, amount: e.target.value})}
               />
             </div>
-            <Button size="sm" onClick={handleAddCost} disabled={!newCost.name || !newCost.amount} className="w-full">
+            {!isNewCostAmountValid && newCost.amount !== '' && (
+              <p className="text-xs text-red-500">Montant &gt; 0 requis.</p>
+            )}
+            <Button size="sm" onClick={handleAddCost} disabled={!isNewCostFormValid} className="w-full">
               Ajouter
             </Button>
           </div>
         </Card>
       </div>
     </div>
   );
 };
diff --git a/components/views/ShoppingList.tsx b/components/views/ShoppingList.tsx
index 6ba14617296ad0c89437cad78fe65e3ac73c64ce..cdb1c07514651fadfa64fc0dfa18d3a8b732a225 100644
--- a/components/views/ShoppingList.tsx
+++ b/components/views/ShoppingList.tsx
@@ -16,51 +16,51 @@ export const ShoppingList: React.FC<Props> = ({ orders, products, recipes, ingre
   const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
   
   const [startDate, setStartDate] = useState(today);
   const [endDate, setEndDate] = useState(nextWeek);
 
   // Filter orders
   const relevantOrders = useMemo(() => {
     return orders.filter(o => {
       return o.date >= startDate && o.date <= endDate && o.status !== 'cancelled';
     });
   }, [orders, startDate, endDate]);
 
   // Calculate Needs
   const shoppingData = useMemo(() => {
     const needs: Record<string, number> = {};
 
     relevantOrders.forEach(order => {
       order.items.forEach(item => {
         const product = products.find(p => p.id === item.productId);
         if (!product) return;
         const recipe = recipes.find(r => r.id === product.recipeId);
         if (!recipe) return;
 
         // Ratio: Needed items / Recipe Batch Yield
         // Example: Need 50 cookies, Batch is 12. Ratio = 4.16
-        const ratio = item.quantity / (recipe.batchYield || 1);
+        const ratio = item.quantity / (recipe.batchYield ?? 1);
 
         recipe.ingredients.forEach(ri => {
           // Add to total needed (in recipe units, usually grams)
           needs[ri.ingredientId] = (needs[ri.ingredientId] || 0) + (ri.quantity * ratio);
         });
       });
     });
 
     // Map to array and compare with stock
     return ingredients.map(ing => {
       const neededRaw = needs[ing.id] || 0;
       
       // Unit Conversion Logic for Comparison
       // If Ingredient is KG/L but Recipe is usually in G/ML (which is common practice in the app)
       // We need to divide neededRaw by 1000 to compare with Stock which is in KG/L
       let neededConverted = neededRaw;
       const isBulkUnit = ing.unit === Unit.KG || ing.unit === Unit.L;
       
       // Assumption based on App usage: Recipe ingredients are usually in grams/ml if stock is kg/L
       // To make it robust: displayUnit logic from IngredientsRecettes
       // displayUnit = (ing.unit === Unit.KG || ing.unit === Unit.G) ? 'g' : (ing.unit === Unit.L || ing.unit === Unit.ML) ? 'ml' : 'pcs';
       
       if (isBulkUnit) {
           neededConverted = neededRaw / 1000;
       }
diff --git a/components/views/StockManagement.tsx b/components/views/StockManagement.tsx
index b0fef77c4eff4ec80dbc0056e762b7baece84e5e..fdd791910ca701ef528ed7873749d54789d49326 100644
--- a/components/views/StockManagement.tsx
+++ b/components/views/StockManagement.tsx
@@ -1,75 +1,82 @@
 
 import React, { useState, useMemo } from 'react';
 import { Ingredient, Unit, Purchase, ProductionBatch, Recipe, Product } from '../../types';
 import { convertToCostPerBaseUnit, formatCurrency } from '../../utils';
-import { Button, Card, Input, Select, InfoTooltip } from '../ui/Common';
+import { isNonNegativeNumber, isPositiveNumber, parseOptionalNumber } from '../../validation';
+import { Button, Card, Input, Select } from '../ui/Common';
 
 interface Props {
   ingredients: Ingredient[];
   setIngredients: React.Dispatch<React.SetStateAction<Ingredient[]>>;
   purchases: Purchase[];
   setPurchases: React.Dispatch<React.SetStateAction<Purchase[]>>;
   productionBatches: ProductionBatch[];
   recipes: Recipe[];
   products: Product[];
 }
 
 export const StockManagement: React.FC<Props> = ({ 
   ingredients, setIngredients, purchases, setPurchases, productionBatches, recipes, products 
 }) => {
   const [activeTab, setActiveTab] = useState<'purchases' | 'analysis' | 'definitions'>('purchases');
 
   // --- Purchase Logic ---
   const [newPurchase, setNewPurchase] = useState<Partial<Purchase>>({ 
     date: new Date().toISOString().split('T')[0],
     quantity: 0,
     price: 0
   });
 
+  const isPurchaseQuantityValid = isPositiveNumber(newPurchase.quantity);
+  const isPurchasePriceValid = isPositiveNumber(newPurchase.price);
+  const isPurchaseFormValid = Boolean(newPurchase.ingredientId && isPurchaseQuantityValid && isPurchasePriceValid);
+
   const handleAddPurchase = () => {
-    if (!newPurchase.ingredientId || !newPurchase.quantity || !newPurchase.price) return;
+    if (!isPurchaseFormValid) return;
     setPurchases([...purchases, {
       id: Date.now().toString(),
       date: newPurchase.date || new Date().toISOString().split('T')[0],
       ingredientId: newPurchase.ingredientId,
       quantity: Number(newPurchase.quantity),
       price: Number(newPurchase.price)
     }]);
     setNewPurchase({ ...newPurchase, quantity: 0, price: 0 });
   };
 
   const handleDeletePurchase = (id: string) => {
     setPurchases(purchases.filter(p => p.id !== id));
   };
 
   // --- Ingredient Definition Logic ---
   const [newIng, setNewIng] = useState<Partial<Ingredient>>({ unit: Unit.KG, price: 0 });
   const [editingId, setEditingId] = useState<string | null>(null);
+  const isIngredientPriceValid = isNonNegativeNumber(newIng.price);
+  const isIngredientFormValid = Boolean(newIng.name && isIngredientPriceValid);
   
   const handleAddOrUpdateIngredient = () => {
-    if (!newIng.name) return;
+    if (!isIngredientFormValid) return;
     const costPerBaseUnit = convertToCostPerBaseUnit(Number(newIng.price || 0), 1, newIng.unit as Unit); 
     
     if (editingId) {
         setIngredients(prev => prev.map(i => i.id === editingId ? {
             ...i,
             name: newIng.name!,
             unit: newIng.unit as Unit,
             price: Number(newIng.price || 0),
             costPerBaseUnit
         } : i));
         setEditingId(null);
     } else {
         setIngredients([...ingredients, {
             id: Date.now().toString(),
             name: newIng.name,
             unit: newIng.unit as Unit,
             price: Number(newIng.price || 0),
             quantity: 0, // Starts with 0 stock
             costPerBaseUnit
         }]);
     }
     setNewIng({ unit: Unit.KG, price: 0, name: '' });
   };
 
   const startEditIngredient = (ing: Ingredient) => {
@@ -100,57 +107,55 @@ export const StockManagement: React.FC<Props> = ({
       const ingPurchases = purchases.filter(p => p.ingredientId === ing.id);
       const totalPurchasedQty = ingPurchases.reduce((acc, p) => acc + p.quantity, 0);
       const totalSpent = ingPurchases.reduce((acc, p) => acc + p.price, 0);
       
       // 2. Calculate Prices (Average vs Last)
       // Terminology Update: "CUMP" -> "Prix Moyen"
       const averagePrice = totalPurchasedQty > 0 ? totalSpent / totalPurchasedQty : 0;
       
       const sortedPurchases = [...ingPurchases].sort((a,b) => new Date(b.date).getTime() - new Date(a.date).getTime());
       const lastPurchase = sortedPurchases[0];
       const lastPrice = lastPurchase ? (lastPurchase.price / lastPurchase.quantity) : 0;
 
       // 3. Calculate Consumption based on Production Batches
       // This is the "Theoretical" usage INCLUDING LOSS RATE
       let totalConsumed = 0;
       productionBatches.forEach(batch => {
         const product = products.find(p => p.id === batch.productId);
         if(!product) return;
         const recipe = recipes.find(r => r.id === product.recipeId);
         if(!recipe) return;
 
         const recipeIng = recipe.ingredients.find(ri => ri.ingredientId === ing.id);
         if(!recipeIng) return;
 
         // Qty used per product unit
-        let qtyPerUnit = recipeIng.quantity / (recipe.batchYield || 1);
+        let qtyPerUnit = recipeIng.quantity / (recipe.batchYield ?? 1);
         
         // Apply Manufacturing Loss Rate from Product (the "real" consumption)
         // If loss rate is 10%, we consume 1/(1-0.10) times more to get the final unit
-        let safeLoss = product.lossRate || 0;
-        if(safeLoss >= 100) safeLoss = 99.9;
-        const lossMultiplier = 1 / (1 - (safeLoss/100));
+        const lossMultiplier = 1 / (1 - (product.lossRate / 100));
 
         qtyPerUnit = qtyPerUnit * lossMultiplier;
 
         // Convert recipe unit to stock unit if necessary
         // Assumption: Recipe is usually G/ML, Stock is KG/L
         let convertedQtyPerUnit = qtyPerUnit;
         if (ing.unit === Unit.KG || ing.unit === Unit.L) {
            convertedQtyPerUnit = qtyPerUnit / 1000;
         }
 
         totalConsumed += convertedQtyPerUnit * batch.quantity;
       });
 
       const currentStock = totalPurchasedQty - totalConsumed;
 
       return {
         ingredient: ing,
         currentStock,
         averagePrice, // Previously CUMP
         lastPrice,
         totalPurchasedQty
       };
     });
   }, [ingredients, purchases, productionBatches, recipes, products]);
 
@@ -189,57 +194,58 @@ export const StockManagement: React.FC<Props> = ({
         <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            <Card className="md:col-span-1 h-fit sticky top-24">
              <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">{editingId ? 'Modifier Ingr√©dient' : 'Nouvel Ingr√©dient'}</h3>
              <div className="space-y-4">
                <Input 
                  label="Nom" 
                  value={newIng.name} 
                  onChange={e => setNewIng({...newIng, name: e.target.value})} 
                />
                <Select 
                   label="Unit√© de Stock" 
                   options={[
                     { value: Unit.KG, label: 'Kilogramme (kg)' },
                     { value: Unit.G, label: 'Gramme (g)' },
                     { value: Unit.L, label: 'Litre (L)' },
                     { value: Unit.ML, label: 'Millilitre (ml)' },
                     { value: Unit.PIECE, label: 'Pi√®ce' },
                   ]}
                   value={newIng.unit}
                   onChange={e => setNewIng({...newIng, unit: e.target.value as Unit})}
                 />
                <Input 
                  label="Prix Standard estim√© (‚Ç¨)" 
                  type="number"
                  step="0.01"
-                 value={newIng.price} 
-                 onChange={e => setNewIng({...newIng, price: parseFloat(e.target.value)})}
+                 value={newIng.price ?? ''} 
+                 onChange={e => setNewIng({...newIng, price: parseOptionalNumber(e.target.value)})}
                  helperText="Prix pour 1 unit√© de stock (ex: pour 1kg)" 
+                 error={isIngredientPriceValid ? undefined : '‚â• 0'}
                />
                <div className="flex gap-2">
                  {editingId && <Button variant="secondary" onClick={cancelEdit} className="w-1/3">Annuler</Button>}
-                 <Button onClick={handleAddOrUpdateIngredient} disabled={!newIng.name} className="flex-1">
+                 <Button onClick={handleAddOrUpdateIngredient} disabled={!isIngredientFormValid} className="flex-1">
                      {editingId ? 'Mettre √† jour' : 'Cr√©er Fiche'}
                  </Button>
                </div>
              </div>
            </Card>
            <Card className="md:col-span-2">
              <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Liste des Ingr√©dients (Fiches Techniques)</h3>
              <div className="overflow-x-auto">
                <table className="w-full text-sm text-left text-stone-600 dark:text-stone-300">
                  <thead className="bg-stone-100 dark:bg-stone-900 font-bold uppercase text-xs">
                    <tr>
                      <th className="p-3">Nom</th>
                      <th className="p-3">Unit√©</th>
                      <th className="p-3">Prix Standard</th>
                      <th className="p-3">Action</th>
                    </tr>
                  </thead>
                  <tbody className="divide-y divide-stone-100 dark:divide-stone-700">
                    {ingredients.map(ing => (
                      <tr key={ing.id} className={`hover:bg-stone-50 dark:hover:bg-stone-800 ${editingId === ing.id ? 'bg-rose-50 dark:bg-rose-900/20' : ''}`}>
                        <td className="p-3 font-medium">{ing.name}</td>
                        <td className="p-3"><span className="bg-stone-200 dark:bg-stone-700 px-2 py-0.5 rounded text-xs">{ing.unit}</span></td>
                        <td className="p-3">{formatCurrency(ing.price)}</td>
                        <td className="p-3 space-x-2">
                          <button onClick={() => startEditIngredient(ing)} className="text-indigo-500 hover:text-indigo-700 text-xs font-bold">Modifier</button>
@@ -259,63 +265,65 @@ export const StockManagement: React.FC<Props> = ({
           <Card className="md:col-span-1 h-fit sticky top-24">
             <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Enregistrer un Achat</h3>
             <div className="space-y-4">
               <Input 
                 label="Date" 
                 type="date"
                 value={newPurchase.date} 
                 onChange={e => setNewPurchase({...newPurchase, date: e.target.value})} 
               />
               <div className="flex flex-col gap-1.5">
                 <label className="text-sm font-bold text-stone-700 dark:text-stone-300">Ingr√©dient</label>
                 <select 
                   className="px-3 py-2.5 rounded-lg border border-stone-300 dark:border-stone-600 text-sm bg-white dark:bg-stone-900 text-stone-900 dark:text-stone-100 focus:outline-none focus:ring-2 focus:ring-rose-100 dark:focus:ring-rose-900 focus:border-[#D45D79] shadow-sm"
                   value={newPurchase.ingredientId}
                   onChange={e => setNewPurchase({...newPurchase, ingredientId: e.target.value})}
                 >
                   <option value="">Choisir...</option>
                   {ingredients.map(i => <option key={i.id} value={i.id}>{i.name} ({i.unit})</option>)}
                 </select>
               </div>
               <div className="grid grid-cols-2 gap-4">
                 <Input 
                   label="Quantit√©" 
                   type="number"
                   step="0.01"
-                  value={newPurchase.quantity} 
-                  onChange={e => setNewPurchase({...newPurchase, quantity: parseFloat(e.target.value)})} 
+                  value={newPurchase.quantity ?? ''} 
+                  onChange={e => setNewPurchase({...newPurchase, quantity: parseOptionalNumber(e.target.value)})} 
+                  error={isPurchaseQuantityValid ? undefined : '> 0'}
                 />
                 <Input 
                   label="Prix Pay√© (Total)" 
                   type="number"
                   step="0.01"
                   suffix="‚Ç¨"
-                  value={newPurchase.price} 
-                  onChange={e => setNewPurchase({...newPurchase, price: parseFloat(e.target.value)})} 
+                  value={newPurchase.price ?? ''} 
+                  onChange={e => setNewPurchase({...newPurchase, price: parseOptionalNumber(e.target.value)})} 
+                  error={isPurchasePriceValid ? undefined : '> 0'}
                 />
               </div>
-              <Button onClick={handleAddPurchase} disabled={!newPurchase.ingredientId || !newPurchase.quantity} className="w-full">
+              <Button onClick={handleAddPurchase} disabled={!isPurchaseFormValid} className="w-full">
                 Ajouter au Journal
               </Button>
             </div>
           </Card>
           
           <Card className="md:col-span-2">
             <h3 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-4">Historique des Achats</h3>
             <div className="overflow-x-auto max-h-[600px]">
               <table className="w-full text-sm text-left text-stone-600 dark:text-stone-300">
                 <thead className="bg-stone-100 dark:bg-stone-900 font-bold uppercase text-xs sticky top-0">
                   <tr>
                     <th className="p-3">Date</th>
                     <th className="p-3">Ingr√©dient</th>
                     <th className="p-3 text-right">Qt√©</th>
                     <th className="p-3 text-right">Prix Total</th>
                     <th className="p-3 text-right">Prix Unit.</th>
                     <th className="p-3"></th>
                   </tr>
                 </thead>
                 <tbody className="divide-y divide-stone-100 dark:divide-stone-700">
                   {[...purchases].sort((a,b) => new Date(b.date).getTime() - new Date(a.date).getTime()).map(p => {
                     const ing = ingredients.find(i => i.id === p.ingredientId);
                     return (
                       <tr key={p.id} className="hover:bg-stone-50 dark:hover:bg-stone-800">
                         <td className="p-3">{new Date(p.date).toLocaleDateString()}</td>
diff --git a/components/views/UserGuide.tsx b/components/views/UserGuide.tsx
index 5660de9180cb9b6af39fadf2cc253d9bfa9ef690..df87d523859430b44c7cc851310b7674e895547f 100644
--- a/components/views/UserGuide.tsx
+++ b/components/views/UserGuide.tsx
@@ -38,51 +38,51 @@ export const UserGuide: React.FC = () => {
       {activeTab === 'basic' && (
         <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
             <Card className="h-fit">
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                 <span className="bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-200 w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold border border-stone-200 dark:border-stone-600">1</span>
                 Param√©trage
             </h3>
             <p className="text-sm text-stone-600 dark:text-stone-300 mb-3">
                 Commencez par l'onglet <strong>Param√®tres</strong>.
             </p>
             <ul className="text-sm text-stone-600 dark:text-stone-400 list-disc pl-5 space-y-2">
                 <li>D√©finissez votre taux horaire et vos taxes (ex: 22%).</li>
                 <li>Listez vos charges fixes (Assurance, Banque...).</li>
             </ul>
             </Card>
 
             <Card className="h-fit">
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                 <span className="bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-200 w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold border border-stone-200 dark:border-stone-600">2</span>
                 Cuisine & Co√ªts
             </h3>
             <p className="text-sm text-stone-600 dark:text-stone-300 mb-3">
                 D√©finissez vos mati√®res et recettes.
             </p>
             <ul className="text-sm text-stone-600 dark:text-stone-400 list-disc pl-5 space-y-2">
-                <li><strong>Stocks & Achats > R√©f√©rentiel</strong> : Cr√©ez vos ingr√©dients.</li>
+                <li><strong>Stocks & Achats &gt; R√©f√©rentiel</strong> : Cr√©ez vos ingr√©dients.</li>
                 <li><strong>Recettes</strong> : Assemblez ces ingr√©dients pour cr√©er des p√¢tes ou bases.</li>
                 <li><strong>Produits</strong> : Cr√©ez le produit final (avec emballage et temps de travail) pour obtenir votre prix de revient.</li>
             </ul>
             </Card>
 
             <Card className="h-fit">
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                 <span className="bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-200 w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold border border-stone-200 dark:border-stone-600">3</span>
                 Gestion Quotidienne
             </h3>
             <p className="text-sm text-stone-600 dark:text-stone-300 mb-3">
                 Utilisez l'application quand vous travaillez.
             </p>
             <ul className="text-sm text-stone-600 dark:text-stone-400 list-disc pl-5 space-y-2">
                 <li><strong>Commandes</strong> : Notez ce que les clients demandent.</li>
                 <li><strong>Courses</strong> : G√©n√©rez la liste des ingr√©dients manquants.</li>
                 <li><strong>Production</strong> : Enregistrez ce que vous sortez du four pour d√©duire les stocks.</li>
             </ul>
             </Card>
 
             <Card className="h-fit">
             <h3 className="text-xl font-bold text-stone-800 dark:text-stone-100 mb-4 flex items-center gap-2">
                 <span className="bg-stone-100 dark:bg-stone-700 text-stone-600 dark:text-stone-200 w-8 h-8 flex items-center justify-center rounded-full text-sm font-bold border border-stone-200 dark:border-stone-600">4</span>
                 Sauvegardes
             </h3>
@@ -102,75 +102,75 @@ export const UserGuide: React.FC = () => {
                <div className="absolute top-0 left-0 w-2 h-full bg-[#D45D79]"></div>
                <h3 className="text-2xl font-bold text-stone-800 dark:text-stone-100 font-serif mb-6">Le Flux de Travail Id√©al</h3>
                
                <div className="space-y-8 relative before:absolute before:left-4 before:top-2 before:h-[95%] before:w-0.5 before:bg-stone-200 dark:before:bg-stone-700">
                   <div className="relative pl-12">
                      <div className="absolute left-0 top-0 bg-[#D45D79] text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-md z-10">1</div>
                      <h4 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-2">Configuration Initiale</h4>
                      <p className="text-stone-600 dark:text-stone-400 text-sm mb-2">
                         Avant de commencer √† vendre, vous devez dire √† l'application combien vous co√ªte votre entreprise.
                      </p>
                      <ul className="list-disc pl-5 text-sm text-stone-500 space-y-1">
                         <li>Allez dans <strong>Param√®tres</strong>.</li>
                         <li>Entrez vos charges fixes r√©elles (Loyer labo, Assurance, Site Web...).</li>
                         <li>D√©finissez combien vous voulez gagner de l'heure.</li>
                      </ul>
                   </div>
 
                   <div className="relative pl-12">
                      <div className="absolute left-0 top-0 bg-stone-200 dark:bg-stone-600 text-stone-600 dark:text-stone-200 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-md z-10">2</div>
                      <h4 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-2">Le R√©f√©rentiel (La Base de Donn√©es)</h4>
                      <p className="text-stone-600 dark:text-stone-400 text-sm mb-2">
                         Construisez votre biblioth√®que virtuelle.
                      </p>
                      <div className="bg-stone-50 dark:bg-stone-900 p-4 rounded-lg text-sm border border-stone-200 dark:border-stone-700">
                         <ol className="list-decimal pl-4 space-y-2 text-stone-600 dark:text-stone-300">
-                           <li><strong>Onglet Stocks & Achats > R√©f√©rentiel</strong> : Cr√©ez tous vos ingr√©dients (Farine, Sucre...). Mettez le prix standard de votre fournisseur.</li>
+                           <li><strong>Onglet Stocks & Achats &gt; R√©f√©rentiel</strong> : Cr√©ez tous vos ingr√©dients (Farine, Sucre...). Mettez le prix standard de votre fournisseur.</li>
                            <li><strong>Onglet Recettes</strong> : Cr√©ez vos bases (P√¢te sabl√©e, Ganache...). Ne cr√©ez pas le produit fini tout de suite, juste la recette technique.</li>
                            <li><strong>Onglet Produits</strong> : C'est ici que vous cr√©ez ce que le client ach√®te (ex: "Tarte au Citron 6 pers"). Vous liez la recette, ajoutez le temps de main d'≈ìuvre, l'emballage et votre marge souhait√©e.</li>
                         </ol>
                      </div>
                   </div>
 
                   <div className="relative pl-12">
                      <div className="absolute left-0 top-0 bg-stone-200 dark:bg-stone-600 text-stone-600 dark:text-stone-200 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-md z-10">3</div>
                      <h4 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-2">La Vie de l'Entreprise (Flux R√©el)</h4>
                      <p className="text-stone-600 dark:text-stone-400 text-sm mb-4">
                         Au jour le jour, voici comment utiliser l'app :
                      </p>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                          <Card className="!p-4">
                             <h5 className="font-bold text-[#D45D79] mb-2">A. Commandes & Courses</h5>
                             <p className="text-xs text-stone-500">
                                 Saisissez une commande dans l'onglet <strong>Commandes</strong>. 
                                 Allez ensuite dans <strong>Courses</strong> pour voir ce qu'il vous manque en fonction de votre stock actuel.
                             </p>
                          </Card>
                          <Card className="!p-4">
                             <h5 className="font-bold text-[#D45D79] mb-2">B. Achats & Production</h5>
                             <p className="text-xs text-stone-500">
-                                Quand vous revenez du magasin, entrez vos tickets dans <strong>Stocks & Achats > Journal</strong>.
+                                Quand vous revenez du magasin, entrez vos tickets dans <strong>Stocks & Achats &gt; Journal</strong>.
                                 Quand vous cuisinez, cliquez sur "üë©‚Äçüç≥ Produire" depuis la commande ou l'onglet <strong>Production</strong>. Cela d√©duit les ingr√©dients de votre stock.
                             </p>
                          </Card>
                      </div>
                   </div>
 
                   <div className="relative pl-12">
                      <div className="absolute left-0 top-0 bg-stone-200 dark:bg-stone-600 text-stone-600 dark:text-stone-200 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm shadow-md z-10">4</div>
                      <h4 className="text-lg font-bold text-stone-800 dark:text-stone-100 mb-2">Fin de Mois : Le Bilan</h4>
                      <p className="text-stone-600 dark:text-stone-400 text-sm mb-2">
                         Pour savoir si vous √™tes rentable :
                      </p>
                      <ul className="list-disc pl-5 text-sm text-stone-500 space-y-1">
                         <li>Allez dans <strong>Bilan</strong>.</li>
                         <li>V√©rifiez que les ventes correspondent √† la r√©alit√©.</li>
                         <li>Choisissez votre m√©thode de co√ªt (Th√©orique ou R√©el via inventaire).</li>
                         <li>Cliquez sur <strong>Sauvegarder ce Bilan</strong> pour figer les r√©sultats.</li>
                      </ul>
                   </div>
                </div>
             </div>
          </div>
       )}
 
       {activeTab === 'advanced' && (
diff --git a/package-lock.json b/package-lock.json
new file mode 100644
index 0000000000000000000000000000000000000000..92ff28ad5e2b4f0465804a58c1ab839e657e7343
--- /dev/null
+++ b/package-lock.json
@@ -0,0 +1,3189 @@
+{
+  "name": "les-douceurs-de-mil√©na",
+  "version": "0.0.0",
+  "lockfileVersion": 3,
+  "requires": true,
+  "packages": {
+    "": {
+      "name": "les-douceurs-de-mil√©na",
+      "version": "0.0.0",
+      "dependencies": {
+        "react": "^19.2.4",
+        "react-dom": "^19.2.4"
+      },
+      "devDependencies": {
+        "@types/node": "^22.14.0",
+        "@vitejs/plugin-react": "^5.0.0",
+        "typescript": "~5.8.2",
+        "vite": "^6.2.0",
+        "vitest": "^2.1.9"
+      }
+    },
+    "node_modules/@babel/code-frame": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.29.0.tgz",
+      "integrity": "sha512-9NhCeYjq9+3uxgdtp20LSiJXJvN0FeCtNGpJxuMFZ1Kv3cWUNb6DOhJwUvcVCzKGR66cw4njwM6hrJLqgOwbcw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-validator-identifier": "^7.28.5",
+        "js-tokens": "^4.0.0",
+        "picocolors": "^1.1.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/compat-data": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.29.0.tgz",
+      "integrity": "sha512-T1NCJqT/j9+cn8fvkt7jtwbLBfLC/1y1c7NtCeXFRgzGTsafi68MRv8yzkYSapBnFA6L3U2VSc02ciDzoAJhJg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/core": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.29.0.tgz",
+      "integrity": "sha512-CGOfOJqWjg2qW/Mb6zNsDm+u5vFQ8DxXfbM09z69p5Z6+mE1ikP2jUXw+j42Pf1XTYED2Rni5f95npYeuwMDQA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/code-frame": "^7.29.0",
+        "@babel/generator": "^7.29.0",
+        "@babel/helper-compilation-targets": "^7.28.6",
+        "@babel/helper-module-transforms": "^7.28.6",
+        "@babel/helpers": "^7.28.6",
+        "@babel/parser": "^7.29.0",
+        "@babel/template": "^7.28.6",
+        "@babel/traverse": "^7.29.0",
+        "@babel/types": "^7.29.0",
+        "@jridgewell/remapping": "^2.3.5",
+        "convert-source-map": "^2.0.0",
+        "debug": "^4.1.0",
+        "gensync": "^1.0.0-beta.2",
+        "json5": "^2.2.3",
+        "semver": "^6.3.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      },
+      "funding": {
+        "type": "opencollective",
+        "url": "https://opencollective.com/babel"
+      }
+    },
+    "node_modules/@babel/generator": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.29.0.tgz",
+      "integrity": "sha512-vSH118/wwM/pLR38g/Sgk05sNtro6TlTJKuiMXDaZqPUfjTFcudpCOt00IhOfj+1BFAX+UFAlzCU+6WXr3GLFQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/parser": "^7.29.0",
+        "@babel/types": "^7.29.0",
+        "@jridgewell/gen-mapping": "^0.3.12",
+        "@jridgewell/trace-mapping": "^0.3.28",
+        "jsesc": "^3.0.2"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-compilation-targets": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.28.6.tgz",
+      "integrity": "sha512-JYtls3hqi15fcx5GaSNL7SCTJ2MNmjrkHXg4FSpOA/grxK8KwyZ5bubHsCq8FXCkua6xhuaaBit+3b7+VZRfcA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/compat-data": "^7.28.6",
+        "@babel/helper-validator-option": "^7.27.1",
+        "browserslist": "^4.24.0",
+        "lru-cache": "^5.1.1",
+        "semver": "^6.3.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-globals": {
+      "version": "7.28.0",
+      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
+      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-module-imports": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.28.6.tgz",
+      "integrity": "sha512-l5XkZK7r7wa9LucGw9LwZyyCUscb4x37JWTPz7swwFE/0FMQAGpiWUZn8u9DzkSBWEcK25jmvubfpw2dnAMdbw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/traverse": "^7.28.6",
+        "@babel/types": "^7.28.6"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-module-transforms": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.6.tgz",
+      "integrity": "sha512-67oXFAYr2cDLDVGLXTEABjdBJZ6drElUSI7WKp70NrpyISso3plG9SAGEF6y7zbha/wOzUByWWTJvEDVNIUGcA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-module-imports": "^7.28.6",
+        "@babel/helper-validator-identifier": "^7.28.5",
+        "@babel/traverse": "^7.28.6"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      },
+      "peerDependencies": {
+        "@babel/core": "^7.0.0"
+      }
+    },
+    "node_modules/@babel/helper-plugin-utils": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.28.6.tgz",
+      "integrity": "sha512-S9gzZ/bz83GRysI7gAD4wPT/AI3uCnY+9xn+Mx/KPs2JwHJIz1W8PZkg2cqyt3RNOBM8ejcXhV6y8Og7ly/Dug==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-string-parser": {
+      "version": "7.27.1",
+      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
+      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-validator-identifier": {
+      "version": "7.28.5",
+      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
+      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helper-validator-option": {
+      "version": "7.27.1",
+      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
+      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/helpers": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.6.tgz",
+      "integrity": "sha512-xOBvwq86HHdB7WUDTfKfT/Vuxh7gElQ+Sfti2Cy6yIWNW05P8iUslOVcZ4/sKbE+/jQaukQAdz/gf3724kYdqw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/template": "^7.28.6",
+        "@babel/types": "^7.28.6"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/parser": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.29.0.tgz",
+      "integrity": "sha512-IyDgFV5GeDUVX4YdF/3CPULtVGSXXMLh1xVIgdCgxApktqnQV0r7/8Nqthg+8YLGaAtdyIlo2qIdZrbCv4+7ww==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/types": "^7.29.0"
+      },
+      "bin": {
+        "parser": "bin/babel-parser.js"
+      },
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
+    "node_modules/@babel/plugin-transform-react-jsx-self": {
+      "version": "7.27.1",
+      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
+      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-plugin-utils": "^7.27.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      },
+      "peerDependencies": {
+        "@babel/core": "^7.0.0-0"
+      }
+    },
+    "node_modules/@babel/plugin-transform-react-jsx-source": {
+      "version": "7.27.1",
+      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
+      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-plugin-utils": "^7.27.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      },
+      "peerDependencies": {
+        "@babel/core": "^7.0.0-0"
+      }
+    },
+    "node_modules/@babel/template": {
+      "version": "7.28.6",
+      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.28.6.tgz",
+      "integrity": "sha512-YA6Ma2KsCdGb+WC6UpBVFJGXL58MDA6oyONbjyF/+5sBgxY/dwkhLogbMT2GXXyU84/IhRw/2D1Os1B/giz+BQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/code-frame": "^7.28.6",
+        "@babel/parser": "^7.28.6",
+        "@babel/types": "^7.28.6"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/traverse": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.29.0.tgz",
+      "integrity": "sha512-4HPiQr0X7+waHfyXPZpWPfWL/J7dcN1mx9gL6WdQVMbPnF3+ZhSMs8tCxN7oHddJE9fhNE7+lxdnlyemKfJRuA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/code-frame": "^7.29.0",
+        "@babel/generator": "^7.29.0",
+        "@babel/helper-globals": "^7.28.0",
+        "@babel/parser": "^7.29.0",
+        "@babel/template": "^7.28.6",
+        "@babel/types": "^7.29.0",
+        "debug": "^4.3.1"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@babel/types": {
+      "version": "7.29.0",
+      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.29.0.tgz",
+      "integrity": "sha512-LwdZHpScM4Qz8Xw2iKSzS+cfglZzJGvofQICy7W7v4caru4EaAmyUuO6BGrbyQ2mYV11W0U8j5mBhd14dd3B0A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/helper-string-parser": "^7.27.1",
+        "@babel/helper-validator-identifier": "^7.28.5"
+      },
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/@esbuild/aix-ppc64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.12.tgz",
+      "integrity": "sha512-Hhmwd6CInZ3dwpuGTF8fJG6yoWmsToE+vYgD4nytZVxcu1ulHpUQRAB1UJ8+N1Am3Mz4+xOByoQoSZf4D+CpkA==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "aix"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-arm": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.12.tgz",
+      "integrity": "sha512-VJ+sKvNA/GE7Ccacc9Cha7bpS8nyzVv0jdVgwNDaR4gDMC/2TTRc33Ip8qrNYUcpkOHUT5OZ0bUcNNVZQ9RLlg==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.12.tgz",
+      "integrity": "sha512-6AAmLG7zwD1Z159jCKPvAxZd4y/VTO0VkprYy+3N2FtJ8+BQWFXU+OxARIwA46c5tdD9SsKGZ/1ocqBS/gAKHg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/android-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.12.tgz",
+      "integrity": "sha512-5jbb+2hhDHx5phYR2By8GTWEzn6I9UqR11Kwf22iKbNpYrsmRB18aX/9ivc5cabcUiAT/wM+YIZ6SG9QO6a8kg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/darwin-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.12.tgz",
+      "integrity": "sha512-N3zl+lxHCifgIlcMUP5016ESkeQjLj/959RxxNYIthIg+CQHInujFuXeWbWMgnTo4cp5XVHqFPmpyu9J65C1Yg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/darwin-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.12.tgz",
+      "integrity": "sha512-HQ9ka4Kx21qHXwtlTUVbKJOAnmG1ipXhdWTmNXiPzPfWKpXqASVcWdnf2bnL73wgjNrFXAa3yYvBSd9pzfEIpA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/freebsd-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.12.tgz",
+      "integrity": "sha512-gA0Bx759+7Jve03K1S0vkOu5Lg/85dou3EseOGUes8flVOGxbhDDh/iZaoek11Y8mtyKPGF3vP8XhnkDEAmzeg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/freebsd-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.12.tgz",
+      "integrity": "sha512-TGbO26Yw2xsHzxtbVFGEXBFH0FRAP7gtcPE7P5yP7wGy7cXK2oO7RyOhL5NLiqTlBh47XhmIUXuGciXEqYFfBQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-arm": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.12.tgz",
+      "integrity": "sha512-lPDGyC1JPDou8kGcywY0YILzWlhhnRjdof3UlcoqYmS9El818LLfJJc3PXXgZHrHCAKs/Z2SeZtDJr5MrkxtOw==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.12.tgz",
+      "integrity": "sha512-8bwX7a8FghIgrupcxb4aUmYDLp8pX06rGh5HqDT7bB+8Rdells6mHvrFHHW2JAOPZUbnjUpKTLg6ECyzvas2AQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-ia32": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.12.tgz",
+      "integrity": "sha512-0y9KrdVnbMM2/vG8KfU0byhUN+EFCny9+8g202gYqSSVMonbsCfLjUO+rCci7pM0WBEtz+oK/PIwHkzxkyharA==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-loong64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.12.tgz",
+      "integrity": "sha512-h///Lr5a9rib/v1GGqXVGzjL4TMvVTv+s1DPoxQdz7l/AYv6LDSxdIwzxkrPW438oUXiDtwM10o9PmwS/6Z0Ng==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-mips64el": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.12.tgz",
+      "integrity": "sha512-iyRrM1Pzy9GFMDLsXn1iHUm18nhKnNMWscjmp4+hpafcZjrr2WbT//d20xaGljXDBYHqRcl8HnxbX6uaA/eGVw==",
+      "cpu": [
+        "mips64el"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-ppc64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.12.tgz",
+      "integrity": "sha512-9meM/lRXxMi5PSUqEXRCtVjEZBGwB7P/D4yT8UG/mwIdze2aV4Vo6U5gD3+RsoHXKkHCfSxZKzmDssVlRj1QQA==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-riscv64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.12.tgz",
+      "integrity": "sha512-Zr7KR4hgKUpWAwb1f3o5ygT04MzqVrGEGXGLnj15YQDJErYu/BGg+wmFlIDOdJp0PmB0lLvxFIOXZgFRrdjR0w==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-s390x": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.12.tgz",
+      "integrity": "sha512-MsKncOcgTNvdtiISc/jZs/Zf8d0cl/t3gYWX8J9ubBnVOwlk65UIEEvgBORTiljloIWnBzLs4qhzPkJcitIzIg==",
+      "cpu": [
+        "s390x"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/linux-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.12.tgz",
+      "integrity": "sha512-uqZMTLr/zR/ed4jIGnwSLkaHmPjOjJvnm6TVVitAa08SLS9Z0VM8wIRx7gWbJB5/J54YuIMInDquWyYvQLZkgw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/netbsd-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.12.tgz",
+      "integrity": "sha512-xXwcTq4GhRM7J9A8Gv5boanHhRa/Q9KLVmcyXHCTaM4wKfIpWkdXiMog/KsnxzJ0A1+nD+zoecuzqPmCRyBGjg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/netbsd-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.12.tgz",
+      "integrity": "sha512-Ld5pTlzPy3YwGec4OuHh1aCVCRvOXdH8DgRjfDy/oumVovmuSzWfnSJg+VtakB9Cm0gxNO9BzWkj6mtO1FMXkQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openbsd-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.12.tgz",
+      "integrity": "sha512-fF96T6KsBo/pkQI950FARU9apGNTSlZGsv1jZBAlcLL1MLjLNIWPBkj5NlSz8aAzYKg+eNqknrUJ24QBybeR5A==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openbsd-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.12.tgz",
+      "integrity": "sha512-MZyXUkZHjQxUvzK7rN8DJ3SRmrVrke8ZyRusHlP+kuwqTcfWLyqMOE3sScPPyeIXN/mDJIfGXvcMqCgYKekoQw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/openharmony-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.12.tgz",
+      "integrity": "sha512-rm0YWsqUSRrjncSXGA7Zv78Nbnw4XL6/dzr20cyrQf7ZmRcsovpcRBdhD43Nuk3y7XIoW2OxMVvwuRvk9XdASg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openharmony"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/sunos-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.12.tgz",
+      "integrity": "sha512-3wGSCDyuTHQUzt0nV7bocDy72r2lI33QL3gkDNGkod22EsYl04sMf0qLb8luNKTOmgF/eDEDP5BFNwoBKH441w==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "sunos"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-arm64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.12.tgz",
+      "integrity": "sha512-rMmLrur64A7+DKlnSuwqUdRKyd3UE7oPJZmnljqEptesKM8wx9J8gx5u0+9Pq0fQQW8vqeKebwNXdfOyP+8Bsg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-ia32": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.12.tgz",
+      "integrity": "sha512-HkqnmmBoCbCwxUKKNPBixiWDGCpQGVsrQfJoVGYLPT41XWF8lHuE5N6WhVia2n4o5QK5M4tYr21827fNhi4byQ==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@esbuild/win32-x64": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.12.tgz",
+      "integrity": "sha512-alJC0uCZpTFrSL0CCDjcgleBXPnCrEAhTBILpeAp7M/OFgoqtAetfBzX0xM00MUsVVPpVjlPuMbREqnZCXaTnA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/@jridgewell/gen-mapping": {
+      "version": "0.3.13",
+      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
+      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/sourcemap-codec": "^1.5.0",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      }
+    },
+    "node_modules/@jridgewell/remapping": {
+      "version": "2.3.5",
+      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
+      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/gen-mapping": "^0.3.5",
+        "@jridgewell/trace-mapping": "^0.3.24"
+      }
+    },
+    "node_modules/@jridgewell/resolve-uri": {
+      "version": "3.1.2",
+      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
+      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.0.0"
+      }
+    },
+    "node_modules/@jridgewell/sourcemap-codec": {
+      "version": "1.5.5",
+      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
+      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/@jridgewell/trace-mapping": {
+      "version": "0.3.31",
+      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
+      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/resolve-uri": "^3.1.0",
+        "@jridgewell/sourcemap-codec": "^1.4.14"
+      }
+    },
+    "node_modules/@rolldown/pluginutils": {
+      "version": "1.0.0-rc.2",
+      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-rc.2.tgz",
+      "integrity": "sha512-izyXV/v+cHiRfozX62W9htOAvwMo4/bXKDrQ+vom1L1qRuexPock/7VZDAhnpHCLNejd3NJ6hiab+tO0D44Rgw==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/@rollup/rollup-android-arm-eabi": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.57.1.tgz",
+      "integrity": "sha512-A6ehUVSiSaaliTxai040ZpZ2zTevHYbvu/lDoeAteHI8QnaosIzm4qwtezfRg1jOYaUmnzLX1AOD6Z+UJjtifg==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ]
+    },
+    "node_modules/@rollup/rollup-android-arm64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.57.1.tgz",
+      "integrity": "sha512-dQaAddCY9YgkFHZcFNS/606Exo8vcLHwArFZ7vxXq4rigo2bb494/xKMMwRRQW6ug7Js6yXmBZhSBRuBvCCQ3w==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ]
+    },
+    "node_modules/@rollup/rollup-darwin-arm64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.57.1.tgz",
+      "integrity": "sha512-crNPrwJOrRxagUYeMn/DZwqN88SDmwaJ8Cvi/TN1HnWBU7GwknckyosC2gd0IqYRsHDEnXf328o9/HC6OkPgOg==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ]
+    },
+    "node_modules/@rollup/rollup-darwin-x64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.57.1.tgz",
+      "integrity": "sha512-Ji8g8ChVbKrhFtig5QBV7iMaJrGtpHelkB3lsaKzadFBe58gmjfGXAOfI5FV0lYMH8wiqsxKQ1C9B0YTRXVy4w==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ]
+    },
+    "node_modules/@rollup/rollup-freebsd-arm64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.57.1.tgz",
+      "integrity": "sha512-R+/WwhsjmwodAcz65guCGFRkMb4gKWTcIeLy60JJQbXrJ97BOXHxnkPFrP+YwFlaS0m+uWJTstrUA9o+UchFug==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ]
+    },
+    "node_modules/@rollup/rollup-freebsd-x64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.57.1.tgz",
+      "integrity": "sha512-IEQTCHeiTOnAUC3IDQdzRAGj3jOAYNr9kBguI7MQAAZK3caezRrg0GxAb6Hchg4lxdZEI5Oq3iov/w/hnFWY9Q==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.57.1.tgz",
+      "integrity": "sha512-F8sWbhZ7tyuEfsmOxwc2giKDQzN3+kuBLPwwZGyVkLlKGdV1nvnNwYD0fKQ8+XS6hp9nY7B+ZeK01EBUE7aHaw==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.57.1.tgz",
+      "integrity": "sha512-rGfNUfn0GIeXtBP1wL5MnzSj98+PZe/AXaGBCRmT0ts80lU5CATYGxXukeTX39XBKsxzFpEeK+Mrp9faXOlmrw==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-arm64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.57.1.tgz",
+      "integrity": "sha512-MMtej3YHWeg/0klK2Qodf3yrNzz6CGjo2UntLvk2RSPlhzgLvYEB3frRvbEF2wRKh1Z2fDIg9KRPe1fawv7C+g==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-arm64-musl": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.57.1.tgz",
+      "integrity": "sha512-1a/qhaaOXhqXGpMFMET9VqwZakkljWHLmZOX48R0I/YLbhdxr1m4gtG1Hq7++VhVUmf+L3sTAf9op4JlhQ5u1Q==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-loong64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.57.1.tgz",
+      "integrity": "sha512-QWO6RQTZ/cqYtJMtxhkRkidoNGXc7ERPbZN7dVW5SdURuLeVU7lwKMpo18XdcmpWYd0qsP1bwKPf7DNSUinhvA==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-loong64-musl": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-musl/-/rollup-linux-loong64-musl-4.57.1.tgz",
+      "integrity": "sha512-xpObYIf+8gprgWaPP32xiN5RVTi/s5FCR+XMXSKmhfoJjrpRAjCuuqQXyxUa/eJTdAE6eJ+KDKaoEqjZQxh3Gw==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.57.1.tgz",
+      "integrity": "sha512-4BrCgrpZo4hvzMDKRqEaW1zeecScDCR+2nZ86ATLhAoJ5FQ+lbHVD3ttKe74/c7tNT9c6F2viwB3ufwp01Oh2w==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-ppc64-musl": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-musl/-/rollup-linux-ppc64-musl-4.57.1.tgz",
+      "integrity": "sha512-NOlUuzesGauESAyEYFSe3QTUguL+lvrN1HtwEEsU2rOwdUDeTMJdO5dUYl/2hKf9jWydJrO9OL/XSSf65R5+Xw==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.57.1.tgz",
+      "integrity": "sha512-ptA88htVp0AwUUqhVghwDIKlvJMD/fmL/wrQj99PRHFRAG6Z5nbWoWG4o81Nt9FT+IuqUQi+L31ZKAFeJ5Is+A==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-riscv64-musl": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.57.1.tgz",
+      "integrity": "sha512-S51t7aMMTNdmAMPpBg7OOsTdn4tySRQvklmL3RpDRyknk87+Sp3xaumlatU+ppQ+5raY7sSTcC2beGgvhENfuw==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-s390x-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.57.1.tgz",
+      "integrity": "sha512-Bl00OFnVFkL82FHbEqy3k5CUCKH6OEJL54KCyx2oqsmZnFTR8IoNqBF+mjQVcRCT5sB6yOvK8A37LNm/kPJiZg==",
+      "cpu": [
+        "s390x"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-x64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.57.1.tgz",
+      "integrity": "sha512-ABca4ceT4N+Tv/GtotnWAeXZUZuM/9AQyCyKYyKnpk4yoA7QIAuBt6Hkgpw8kActYlew2mvckXkvx0FfoInnLg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-linux-x64-musl": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.57.1.tgz",
+      "integrity": "sha512-HFps0JeGtuOR2convgRRkHCekD7j+gdAuXM+/i6kGzQtFhlCtQkpwtNzkNj6QhCDp7DRJ7+qC/1Vg2jt5iSOFw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ]
+    },
+    "node_modules/@rollup/rollup-openbsd-x64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-openbsd-x64/-/rollup-openbsd-x64-4.57.1.tgz",
+      "integrity": "sha512-H+hXEv9gdVQuDTgnqD+SQffoWoc0Of59AStSzTEj/feWTBAnSfSD3+Dql1ZruJQxmykT/JVY0dE8Ka7z0DH1hw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ]
+    },
+    "node_modules/@rollup/rollup-openharmony-arm64": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.57.1.tgz",
+      "integrity": "sha512-4wYoDpNg6o/oPximyc/NG+mYUejZrCU2q+2w6YZqrAs2UcNUChIZXjtafAiiZSUc7On8v5NyNj34Kzj/Ltk6dQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openharmony"
+      ]
+    },
+    "node_modules/@rollup/rollup-win32-arm64-msvc": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.57.1.tgz",
+      "integrity": "sha512-O54mtsV/6LW3P8qdTcamQmuC990HDfR71lo44oZMZlXU4tzLrbvTii87Ni9opq60ds0YzuAlEr/GNwuNluZyMQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ]
+    },
+    "node_modules/@rollup/rollup-win32-ia32-msvc": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.57.1.tgz",
+      "integrity": "sha512-P3dLS+IerxCT/7D2q2FYcRdWRl22dNbrbBEtxdWhXrfIMPP9lQhb5h4Du04mdl5Woq05jVCDPCMF7Ub0NAjIew==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ]
+    },
+    "node_modules/@rollup/rollup-win32-x64-gnu": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.57.1.tgz",
+      "integrity": "sha512-VMBH2eOOaKGtIJYleXsi2B8CPVADrh+TyNxJ4mWPnKfLB/DBUmzW+5m1xUrcwWoMfSLagIRpjUFeW5CO5hyciQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ]
+    },
+    "node_modules/@rollup/rollup-win32-x64-msvc": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.57.1.tgz",
+      "integrity": "sha512-mxRFDdHIWRxg3UfIIAwCm6NzvxG0jDX/wBN6KsQFTvKFqqg9vTrWUE68qEjHt19A5wwx5X5aUi2zuZT7YR0jrA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ]
+    },
+    "node_modules/@types/babel__core": {
+      "version": "7.20.5",
+      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
+      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/parser": "^7.20.7",
+        "@babel/types": "^7.20.7",
+        "@types/babel__generator": "*",
+        "@types/babel__template": "*",
+        "@types/babel__traverse": "*"
+      }
+    },
+    "node_modules/@types/babel__generator": {
+      "version": "7.27.0",
+      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
+      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/types": "^7.0.0"
+      }
+    },
+    "node_modules/@types/babel__template": {
+      "version": "7.4.4",
+      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
+      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/parser": "^7.1.0",
+        "@babel/types": "^7.0.0"
+      }
+    },
+    "node_modules/@types/babel__traverse": {
+      "version": "7.28.0",
+      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
+      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/types": "^7.28.2"
+      }
+    },
+    "node_modules/@types/estree": {
+      "version": "1.0.8",
+      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
+      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/@types/node": {
+      "version": "22.19.8",
+      "resolved": "https://registry.npmjs.org/@types/node/-/node-22.19.8.tgz",
+      "integrity": "sha512-ebO/Yl+EAvVe8DnMfi+iaAyIqYdK0q/q0y0rw82INWEKJOBe6b/P3YWE8NW7oOlF/nXFNrHwhARrN/hdgDkraA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "undici-types": "~6.21.0"
+      }
+    },
+    "node_modules/@vitejs/plugin-react": {
+      "version": "5.1.3",
+      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-5.1.3.tgz",
+      "integrity": "sha512-NVUnA6gQCl8jfoYqKqQU5Clv0aPw14KkZYCsX6T9Lfu9slI0LOU10OTwFHS/WmptsMMpshNd/1tuWsHQ2Uk+cg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@babel/core": "^7.29.0",
+        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
+        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
+        "@rolldown/pluginutils": "1.0.0-rc.2",
+        "@types/babel__core": "^7.20.5",
+        "react-refresh": "^0.18.0"
+      },
+      "engines": {
+        "node": "^20.19.0 || >=22.12.0"
+      },
+      "peerDependencies": {
+        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
+      }
+    },
+    "node_modules/@vitest/expect": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/expect/-/expect-2.1.9.tgz",
+      "integrity": "sha512-UJCIkTBenHeKT1TTlKMJWy1laZewsRIzYighyYiJKZreqtdxSos/S1t+ktRMQWu2CKqaarrkeszJx1cgC5tGZw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/spy": "2.1.9",
+        "@vitest/utils": "2.1.9",
+        "chai": "^5.1.2",
+        "tinyrainbow": "^1.2.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/pretty-format": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/pretty-format/-/pretty-format-2.1.9.tgz",
+      "integrity": "sha512-KhRIdGV2U9HOUzxfiHmY8IFHTdqtOhIzCpd8WRdJiE7D/HUcZVD0EgQCVjm+Q9gkUXWgBvMmTtZgIG48wq7sOQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "tinyrainbow": "^1.2.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/runner": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/runner/-/runner-2.1.9.tgz",
+      "integrity": "sha512-ZXSSqTFIrzduD63btIfEyOmNcBmQvgOVsPNPe0jYtESiXkhd8u2erDLnMxmGrDCwHCCHE7hxwRDCT3pt0esT4g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/utils": "2.1.9",
+        "pathe": "^1.1.2"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/snapshot": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/snapshot/-/snapshot-2.1.9.tgz",
+      "integrity": "sha512-oBO82rEjsxLNJincVhLhaxxZdEtV0EFHMK5Kmx5sJ6H9L183dHECjiefOAdnqpIgT5eZwT04PoggUnW88vOBNQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/pretty-format": "2.1.9",
+        "magic-string": "^0.30.12",
+        "pathe": "^1.1.2"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/spy": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/spy/-/spy-2.1.9.tgz",
+      "integrity": "sha512-E1B35FwzXXTs9FHNK6bDszs7mtydNi5MIfUWpceJ8Xbfb1gBMscAnwLbEu+B44ed6W3XjL9/ehLPHR1fkf1KLQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "tinyspy": "^3.0.2"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/@vitest/utils": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/utils/-/utils-2.1.9.tgz",
+      "integrity": "sha512-v0psaMSkNJ3A2NMrUEHFRzJtDPFn+/VWZ5WxImB21T9fjucJRmS7xCS3ppEnARb9y11OAzaD+P2Ps+b+BGX5iQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/pretty-format": "2.1.9",
+        "loupe": "^3.1.2",
+        "tinyrainbow": "^1.2.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/assertion-error": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/assertion-error/-/assertion-error-2.0.1.tgz",
+      "integrity": "sha512-Izi8RQcffqCeNVgFigKli1ssklIbpHnCYc6AknXGYoB6grJqyeby7jv12JUQgmTAnIDnbck1uxksT4dzN3PWBA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/baseline-browser-mapping": {
+      "version": "2.9.19",
+      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.19.tgz",
+      "integrity": "sha512-ipDqC8FrAl/76p2SSWKSI+H9tFwm7vYqXQrItCuiVPt26Km0jS+NzSsBWAaBusvSbQcfJG+JitdMm+wZAgTYqg==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "bin": {
+        "baseline-browser-mapping": "dist/cli.js"
+      }
+    },
+    "node_modules/browserslist": {
+      "version": "4.28.1",
+      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
+      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
+      "dev": true,
+      "funding": [
+        {
+          "type": "opencollective",
+          "url": "https://opencollective.com/browserslist"
+        },
+        {
+          "type": "tidelift",
+          "url": "https://tidelift.com/funding/github/npm/browserslist"
+        },
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/ai"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "baseline-browser-mapping": "^2.9.0",
+        "caniuse-lite": "^1.0.30001759",
+        "electron-to-chromium": "^1.5.263",
+        "node-releases": "^2.0.27",
+        "update-browserslist-db": "^1.2.0"
+      },
+      "bin": {
+        "browserslist": "cli.js"
+      },
+      "engines": {
+        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
+      }
+    },
+    "node_modules/cac": {
+      "version": "6.7.14",
+      "resolved": "https://registry.npmjs.org/cac/-/cac-6.7.14.tgz",
+      "integrity": "sha512-b6Ilus+c3RrdDk+JhLKUAQfzzgLEPy6wcXqS7f/xe1EETvsDP6GORG7SFuOs6cID5YkqchW/LXZbX5bc8j7ZcQ==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/caniuse-lite": {
+      "version": "1.0.30001767",
+      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001767.tgz",
+      "integrity": "sha512-34+zUAMhSH+r+9eKmYG+k2Rpt8XttfE4yXAjoZvkAPs15xcYQhyBYdalJ65BzivAvGRMViEjy6oKr/S91loekQ==",
+      "dev": true,
+      "funding": [
+        {
+          "type": "opencollective",
+          "url": "https://opencollective.com/browserslist"
+        },
+        {
+          "type": "tidelift",
+          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
+        },
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/ai"
+        }
+      ],
+      "license": "CC-BY-4.0"
+    },
+    "node_modules/chai": {
+      "version": "5.3.3",
+      "resolved": "https://registry.npmjs.org/chai/-/chai-5.3.3.tgz",
+      "integrity": "sha512-4zNhdJD/iOjSH0A05ea+Ke6MU5mmpQcbQsSOkgdaUMJ9zTlDTD/GYlwohmIE2u0gaxHYiVHEn1Fw9mZ/ktJWgw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "assertion-error": "^2.0.1",
+        "check-error": "^2.1.1",
+        "deep-eql": "^5.0.1",
+        "loupe": "^3.1.0",
+        "pathval": "^2.0.0"
+      },
+      "engines": {
+        "node": ">=18"
+      }
+    },
+    "node_modules/check-error": {
+      "version": "2.1.3",
+      "resolved": "https://registry.npmjs.org/check-error/-/check-error-2.1.3.tgz",
+      "integrity": "sha512-PAJdDJusoxnwm1VwW07VWwUN1sl7smmC3OKggvndJFadxxDRyFJBX/ggnu/KE4kQAB7a3Dp8f/YXC1FlUprWmA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">= 16"
+      }
+    },
+    "node_modules/convert-source-map": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
+      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/debug": {
+      "version": "4.4.3",
+      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
+      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "ms": "^2.1.3"
+      },
+      "engines": {
+        "node": ">=6.0"
+      },
+      "peerDependenciesMeta": {
+        "supports-color": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/deep-eql": {
+      "version": "5.0.2",
+      "resolved": "https://registry.npmjs.org/deep-eql/-/deep-eql-5.0.2.tgz",
+      "integrity": "sha512-h5k/5U50IJJFpzfL6nO9jaaumfjO/f2NjK/oYB2Djzm4p9L+3T9qWpZqZ2hAbLPuuYq9wrU08WQyBTL5GbPk5Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/electron-to-chromium": {
+      "version": "1.5.286",
+      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.286.tgz",
+      "integrity": "sha512-9tfDXhJ4RKFNerfjdCcZfufu49vg620741MNs26a9+bhLThdB+plgMeou98CAaHu/WATj2iHOOHTp1hWtABj2A==",
+      "dev": true,
+      "license": "ISC"
+    },
+    "node_modules/es-module-lexer": {
+      "version": "1.7.0",
+      "resolved": "https://registry.npmjs.org/es-module-lexer/-/es-module-lexer-1.7.0.tgz",
+      "integrity": "sha512-jEQoCwk8hyb2AZziIOLhDqpm5+2ww5uIE6lkO/6jcOCusfk6LhMHpXXfBLXTZ7Ydyt0j4VoUQv6uGNYbdW+kBA==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/esbuild": {
+      "version": "0.25.12",
+      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.12.tgz",
+      "integrity": "sha512-bbPBYYrtZbkt6Os6FiTLCTFxvq4tt3JKall1vRwshA3fdVztsLAatFaZobhkBC8/BrPetoa0oksYoKXoG4ryJg==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "bin": {
+        "esbuild": "bin/esbuild"
+      },
+      "engines": {
+        "node": ">=18"
+      },
+      "optionalDependencies": {
+        "@esbuild/aix-ppc64": "0.25.12",
+        "@esbuild/android-arm": "0.25.12",
+        "@esbuild/android-arm64": "0.25.12",
+        "@esbuild/android-x64": "0.25.12",
+        "@esbuild/darwin-arm64": "0.25.12",
+        "@esbuild/darwin-x64": "0.25.12",
+        "@esbuild/freebsd-arm64": "0.25.12",
+        "@esbuild/freebsd-x64": "0.25.12",
+        "@esbuild/linux-arm": "0.25.12",
+        "@esbuild/linux-arm64": "0.25.12",
+        "@esbuild/linux-ia32": "0.25.12",
+        "@esbuild/linux-loong64": "0.25.12",
+        "@esbuild/linux-mips64el": "0.25.12",
+        "@esbuild/linux-ppc64": "0.25.12",
+        "@esbuild/linux-riscv64": "0.25.12",
+        "@esbuild/linux-s390x": "0.25.12",
+        "@esbuild/linux-x64": "0.25.12",
+        "@esbuild/netbsd-arm64": "0.25.12",
+        "@esbuild/netbsd-x64": "0.25.12",
+        "@esbuild/openbsd-arm64": "0.25.12",
+        "@esbuild/openbsd-x64": "0.25.12",
+        "@esbuild/openharmony-arm64": "0.25.12",
+        "@esbuild/sunos-x64": "0.25.12",
+        "@esbuild/win32-arm64": "0.25.12",
+        "@esbuild/win32-ia32": "0.25.12",
+        "@esbuild/win32-x64": "0.25.12"
+      }
+    },
+    "node_modules/escalade": {
+      "version": "3.2.0",
+      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
+      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/estree-walker": {
+      "version": "3.0.3",
+      "resolved": "https://registry.npmjs.org/estree-walker/-/estree-walker-3.0.3.tgz",
+      "integrity": "sha512-7RUKfXgSMMkzt6ZuXmqapOurLGPPfgj6l9uRZ7lRGolvk0y2yocc35LdcxKC5PQZdn2DMqioAQ2NoWcrTKmm6g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/estree": "^1.0.0"
+      }
+    },
+    "node_modules/expect-type": {
+      "version": "1.3.0",
+      "resolved": "https://registry.npmjs.org/expect-type/-/expect-type-1.3.0.tgz",
+      "integrity": "sha512-knvyeauYhqjOYvQ66MznSMs83wmHrCycNEN6Ao+2AeYEfxUIkuiVxdEa1qlGEPK+We3n0THiDciYSsCcgW/DoA==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "engines": {
+        "node": ">=12.0.0"
+      }
+    },
+    "node_modules/fdir": {
+      "version": "6.5.0",
+      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
+      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12.0.0"
+      },
+      "peerDependencies": {
+        "picomatch": "^3 || ^4"
+      },
+      "peerDependenciesMeta": {
+        "picomatch": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/fsevents": {
+      "version": "2.3.3",
+      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
+      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
+      }
+    },
+    "node_modules/gensync": {
+      "version": "1.0.0-beta.2",
+      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
+      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=6.9.0"
+      }
+    },
+    "node_modules/js-tokens": {
+      "version": "4.0.0",
+      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
+      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/jsesc": {
+      "version": "3.1.0",
+      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
+      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
+      "dev": true,
+      "license": "MIT",
+      "bin": {
+        "jsesc": "bin/jsesc"
+      },
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/json5": {
+      "version": "2.2.3",
+      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
+      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
+      "dev": true,
+      "license": "MIT",
+      "bin": {
+        "json5": "lib/cli.js"
+      },
+      "engines": {
+        "node": ">=6"
+      }
+    },
+    "node_modules/loupe": {
+      "version": "3.2.1",
+      "resolved": "https://registry.npmjs.org/loupe/-/loupe-3.2.1.tgz",
+      "integrity": "sha512-CdzqowRJCeLU72bHvWqwRBBlLcMEtIvGrlvef74kMnV2AolS9Y8xUv1I0U/MNAWMhBlKIoyuEgoJ0t/bbwHbLQ==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/lru-cache": {
+      "version": "5.1.1",
+      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
+      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
+      "dev": true,
+      "license": "ISC",
+      "dependencies": {
+        "yallist": "^3.0.2"
+      }
+    },
+    "node_modules/magic-string": {
+      "version": "0.30.21",
+      "resolved": "https://registry.npmjs.org/magic-string/-/magic-string-0.30.21.tgz",
+      "integrity": "sha512-vd2F4YUyEXKGcLHoq+TEyCjxueSeHnFxyyjNp80yg0XV4vUhnDer/lvvlqM/arB5bXQN5K2/3oinyCRyx8T2CQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@jridgewell/sourcemap-codec": "^1.5.5"
+      }
+    },
+    "node_modules/ms": {
+      "version": "2.1.3",
+      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
+      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/nanoid": {
+      "version": "3.3.11",
+      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
+      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
+      "dev": true,
+      "funding": [
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/ai"
+        }
+      ],
+      "license": "MIT",
+      "bin": {
+        "nanoid": "bin/nanoid.cjs"
+      },
+      "engines": {
+        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
+      }
+    },
+    "node_modules/node-releases": {
+      "version": "2.0.27",
+      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
+      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/pathe": {
+      "version": "1.1.2",
+      "resolved": "https://registry.npmjs.org/pathe/-/pathe-1.1.2.tgz",
+      "integrity": "sha512-whLdWMYL2TwI08hn8/ZqAbrVemu0LNaNNJZX73O6qaIdCTfXutsLhMkjdENX0qhsQ9uIimo4/aQOmXkoon2nDQ==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/pathval": {
+      "version": "2.0.1",
+      "resolved": "https://registry.npmjs.org/pathval/-/pathval-2.0.1.tgz",
+      "integrity": "sha512-//nshmD55c46FuFw26xV/xFAaB5HF9Xdap7HJBBnrKdAd6/GxDBaNA1870O79+9ueg61cZLSVc+OaFlfmObYVQ==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">= 14.16"
+      }
+    },
+    "node_modules/picocolors": {
+      "version": "1.1.1",
+      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
+      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
+      "dev": true,
+      "license": "ISC"
+    },
+    "node_modules/picomatch": {
+      "version": "4.0.3",
+      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
+      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=12"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/jonschlinkert"
+      }
+    },
+    "node_modules/postcss": {
+      "version": "8.5.6",
+      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
+      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
+      "dev": true,
+      "funding": [
+        {
+          "type": "opencollective",
+          "url": "https://opencollective.com/postcss/"
+        },
+        {
+          "type": "tidelift",
+          "url": "https://tidelift.com/funding/github/npm/postcss"
+        },
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/ai"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "nanoid": "^3.3.11",
+        "picocolors": "^1.1.1",
+        "source-map-js": "^1.2.1"
+      },
+      "engines": {
+        "node": "^10 || ^12 || >=14"
+      }
+    },
+    "node_modules/react": {
+      "version": "19.2.4",
+      "resolved": "https://registry.npmjs.org/react/-/react-19.2.4.tgz",
+      "integrity": "sha512-9nfp2hYpCwOjAN+8TZFGhtWEwgvWHXqESH8qT89AT/lWklpLON22Lc8pEtnpsZz7VmawabSU0gCjnj8aC0euHQ==",
+      "license": "MIT",
+      "engines": {
+        "node": ">=0.10.0"
+      }
+    },
+    "node_modules/react-dom": {
+      "version": "19.2.4",
+      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.4.tgz",
+      "integrity": "sha512-AXJdLo8kgMbimY95O2aKQqsz2iWi9jMgKJhRBAxECE4IFxfcazB2LmzloIoibJI3C12IlY20+KFaLv+71bUJeQ==",
+      "license": "MIT",
+      "dependencies": {
+        "scheduler": "^0.27.0"
+      },
+      "peerDependencies": {
+        "react": "^19.2.4"
+      }
+    },
+    "node_modules/react-refresh": {
+      "version": "0.18.0",
+      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.18.0.tgz",
+      "integrity": "sha512-QgT5//D3jfjJb6Gsjxv0Slpj23ip+HtOpnNgnb2S5zU3CB26G/IDPGoy4RJB42wzFE46DRsstbW6tKHoKbhAxw==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=0.10.0"
+      }
+    },
+    "node_modules/rollup": {
+      "version": "4.57.1",
+      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.57.1.tgz",
+      "integrity": "sha512-oQL6lgK3e2QZeQ7gcgIkS2YZPg5slw37hYufJ3edKlfQSGGm8ICoxswK15ntSzF/a8+h7ekRy7k7oWc3BQ7y8A==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@types/estree": "1.0.8"
+      },
+      "bin": {
+        "rollup": "dist/bin/rollup"
+      },
+      "engines": {
+        "node": ">=18.0.0",
+        "npm": ">=8.0.0"
+      },
+      "optionalDependencies": {
+        "@rollup/rollup-android-arm-eabi": "4.57.1",
+        "@rollup/rollup-android-arm64": "4.57.1",
+        "@rollup/rollup-darwin-arm64": "4.57.1",
+        "@rollup/rollup-darwin-x64": "4.57.1",
+        "@rollup/rollup-freebsd-arm64": "4.57.1",
+        "@rollup/rollup-freebsd-x64": "4.57.1",
+        "@rollup/rollup-linux-arm-gnueabihf": "4.57.1",
+        "@rollup/rollup-linux-arm-musleabihf": "4.57.1",
+        "@rollup/rollup-linux-arm64-gnu": "4.57.1",
+        "@rollup/rollup-linux-arm64-musl": "4.57.1",
+        "@rollup/rollup-linux-loong64-gnu": "4.57.1",
+        "@rollup/rollup-linux-loong64-musl": "4.57.1",
+        "@rollup/rollup-linux-ppc64-gnu": "4.57.1",
+        "@rollup/rollup-linux-ppc64-musl": "4.57.1",
+        "@rollup/rollup-linux-riscv64-gnu": "4.57.1",
+        "@rollup/rollup-linux-riscv64-musl": "4.57.1",
+        "@rollup/rollup-linux-s390x-gnu": "4.57.1",
+        "@rollup/rollup-linux-x64-gnu": "4.57.1",
+        "@rollup/rollup-linux-x64-musl": "4.57.1",
+        "@rollup/rollup-openbsd-x64": "4.57.1",
+        "@rollup/rollup-openharmony-arm64": "4.57.1",
+        "@rollup/rollup-win32-arm64-msvc": "4.57.1",
+        "@rollup/rollup-win32-ia32-msvc": "4.57.1",
+        "@rollup/rollup-win32-x64-gnu": "4.57.1",
+        "@rollup/rollup-win32-x64-msvc": "4.57.1",
+        "fsevents": "~2.3.2"
+      }
+    },
+    "node_modules/scheduler": {
+      "version": "0.27.0",
+      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
+      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q==",
+      "license": "MIT"
+    },
+    "node_modules/semver": {
+      "version": "6.3.1",
+      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
+      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
+      "dev": true,
+      "license": "ISC",
+      "bin": {
+        "semver": "bin/semver.js"
+      }
+    },
+    "node_modules/siginfo": {
+      "version": "2.0.0",
+      "resolved": "https://registry.npmjs.org/siginfo/-/siginfo-2.0.0.tgz",
+      "integrity": "sha512-ybx0WO1/8bSBLEWXZvEd7gMW3Sn3JFlW3TvX1nREbDLRNQNaeNN8WK0meBwPdAaOI7TtRRRJn/Es1zhrrCHu7g==",
+      "dev": true,
+      "license": "ISC"
+    },
+    "node_modules/source-map-js": {
+      "version": "1.2.1",
+      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
+      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
+      "dev": true,
+      "license": "BSD-3-Clause",
+      "engines": {
+        "node": ">=0.10.0"
+      }
+    },
+    "node_modules/stackback": {
+      "version": "0.0.2",
+      "resolved": "https://registry.npmjs.org/stackback/-/stackback-0.0.2.tgz",
+      "integrity": "sha512-1XMJE5fQo1jGH6Y/7ebnwPOBEkIEnT4QF32d5R1+VXdXveM0IBMJt8zfaxX1P3QhVwrYe+576+jkANtSS2mBbw==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/std-env": {
+      "version": "3.10.0",
+      "resolved": "https://registry.npmjs.org/std-env/-/std-env-3.10.0.tgz",
+      "integrity": "sha512-5GS12FdOZNliM5mAOxFRg7Ir0pWz8MdpYm6AY6VPkGpbA7ZzmbzNcBJQ0GPvvyWgcY7QAhCgf9Uy89I03faLkg==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/tinybench": {
+      "version": "2.9.0",
+      "resolved": "https://registry.npmjs.org/tinybench/-/tinybench-2.9.0.tgz",
+      "integrity": "sha512-0+DUvqWMValLmha6lr4kD8iAMK1HzV0/aKnCtWb9v9641TnP/MFb7Pc2bxoxQjTXAErryXVgUOfv2YqNllqGeg==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/tinyexec": {
+      "version": "0.3.2",
+      "resolved": "https://registry.npmjs.org/tinyexec/-/tinyexec-0.3.2.tgz",
+      "integrity": "sha512-KQQR9yN7R5+OSwaK0XQoj22pwHoTlgYqmUscPYoknOoWCWfj/5/ABTMRi69FrKU5ffPVh5QcFikpWJI/P1ocHA==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/tinyglobby": {
+      "version": "0.2.15",
+      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
+      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "fdir": "^6.5.0",
+        "picomatch": "^4.0.3"
+      },
+      "engines": {
+        "node": ">=12.0.0"
+      },
+      "funding": {
+        "url": "https://github.com/sponsors/SuperchupuDev"
+      }
+    },
+    "node_modules/tinypool": {
+      "version": "1.1.1",
+      "resolved": "https://registry.npmjs.org/tinypool/-/tinypool-1.1.1.tgz",
+      "integrity": "sha512-Zba82s87IFq9A9XmjiX5uZA/ARWDrB03OHlq+Vw1fSdt0I+4/Kutwy8BP4Y/y/aORMo61FQ0vIb5j44vSo5Pkg==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      }
+    },
+    "node_modules/tinyrainbow": {
+      "version": "1.2.0",
+      "resolved": "https://registry.npmjs.org/tinyrainbow/-/tinyrainbow-1.2.0.tgz",
+      "integrity": "sha512-weEDEq7Z5eTHPDh4xjX789+fHfF+P8boiFB+0vbWzpbnbsEr/GRaohi/uMKxg8RZMXnl1ItAi/IUHWMsjDV7kQ==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=14.0.0"
+      }
+    },
+    "node_modules/tinyspy": {
+      "version": "3.0.2",
+      "resolved": "https://registry.npmjs.org/tinyspy/-/tinyspy-3.0.2.tgz",
+      "integrity": "sha512-n1cw8k1k0x4pgA2+9XrOkFydTerNcJ1zWCO5Nn9scWHTD+5tp8dghT2x1uduQePZTZgd3Tupf+x9BxJjeJi77Q==",
+      "dev": true,
+      "license": "MIT",
+      "engines": {
+        "node": ">=14.0.0"
+      }
+    },
+    "node_modules/typescript": {
+      "version": "5.8.3",
+      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.8.3.tgz",
+      "integrity": "sha512-p1diW6TqL9L07nNxvRMM7hMMw4c5XOo/1ibL4aAIGmSAt9slTE1Xgw5KWuof2uTOvCg9BY7ZRi+GaF+7sfgPeQ==",
+      "dev": true,
+      "license": "Apache-2.0",
+      "bin": {
+        "tsc": "bin/tsc",
+        "tsserver": "bin/tsserver"
+      },
+      "engines": {
+        "node": ">=14.17"
+      }
+    },
+    "node_modules/undici-types": {
+      "version": "6.21.0",
+      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
+      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
+      "dev": true,
+      "license": "MIT"
+    },
+    "node_modules/update-browserslist-db": {
+      "version": "1.2.3",
+      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.3.tgz",
+      "integrity": "sha512-Js0m9cx+qOgDxo0eMiFGEueWztz+d4+M3rGlmKPT+T4IS/jP4ylw3Nwpu6cpTTP8R1MAC1kF4VbdLt3ARf209w==",
+      "dev": true,
+      "funding": [
+        {
+          "type": "opencollective",
+          "url": "https://opencollective.com/browserslist"
+        },
+        {
+          "type": "tidelift",
+          "url": "https://tidelift.com/funding/github/npm/browserslist"
+        },
+        {
+          "type": "github",
+          "url": "https://github.com/sponsors/ai"
+        }
+      ],
+      "license": "MIT",
+      "dependencies": {
+        "escalade": "^3.2.0",
+        "picocolors": "^1.1.1"
+      },
+      "bin": {
+        "update-browserslist-db": "cli.js"
+      },
+      "peerDependencies": {
+        "browserslist": ">= 4.21.0"
+      }
+    },
+    "node_modules/vite": {
+      "version": "6.4.1",
+      "resolved": "https://registry.npmjs.org/vite/-/vite-6.4.1.tgz",
+      "integrity": "sha512-+Oxm7q9hDoLMyJOYfUYBuHQo+dkAloi33apOPP56pzj+vsdJDzr+j1NISE5pyaAuKL4A3UD34qd0lx5+kfKp2g==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "esbuild": "^0.25.0",
+        "fdir": "^6.4.4",
+        "picomatch": "^4.0.2",
+        "postcss": "^8.5.3",
+        "rollup": "^4.34.9",
+        "tinyglobby": "^0.2.13"
+      },
+      "bin": {
+        "vite": "bin/vite.js"
+      },
+      "engines": {
+        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
+      },
+      "funding": {
+        "url": "https://github.com/vitejs/vite?sponsor=1"
+      },
+      "optionalDependencies": {
+        "fsevents": "~2.3.3"
+      },
+      "peerDependencies": {
+        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
+        "jiti": ">=1.21.0",
+        "less": "*",
+        "lightningcss": "^1.21.0",
+        "sass": "*",
+        "sass-embedded": "*",
+        "stylus": "*",
+        "sugarss": "*",
+        "terser": "^5.16.0",
+        "tsx": "^4.8.1",
+        "yaml": "^2.4.2"
+      },
+      "peerDependenciesMeta": {
+        "@types/node": {
+          "optional": true
+        },
+        "jiti": {
+          "optional": true
+        },
+        "less": {
+          "optional": true
+        },
+        "lightningcss": {
+          "optional": true
+        },
+        "sass": {
+          "optional": true
+        },
+        "sass-embedded": {
+          "optional": true
+        },
+        "stylus": {
+          "optional": true
+        },
+        "sugarss": {
+          "optional": true
+        },
+        "terser": {
+          "optional": true
+        },
+        "tsx": {
+          "optional": true
+        },
+        "yaml": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vite-node": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/vite-node/-/vite-node-2.1.9.tgz",
+      "integrity": "sha512-AM9aQ/IPrW/6ENLQg3AGY4K1N2TGZdR5e4gu/MmmR2xR3Ll1+dib+nook92g4TV3PXVyeyxdWwtaCAiUL0hMxA==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "cac": "^6.7.14",
+        "debug": "^4.3.7",
+        "es-module-lexer": "^1.5.4",
+        "pathe": "^1.1.2",
+        "vite": "^5.0.0"
+      },
+      "bin": {
+        "vite-node": "vite-node.mjs"
+      },
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/aix-ppc64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
+      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "aix"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/android-arm": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
+      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/android-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
+      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/android-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
+      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/darwin-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
+      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/darwin-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
+      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/freebsd-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
+      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/freebsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
+      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-arm": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
+      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
+      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-ia32": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
+      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-loong64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
+      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-mips64el": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
+      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
+      "cpu": [
+        "mips64el"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-ppc64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
+      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-riscv64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
+      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-s390x": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
+      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
+      "cpu": [
+        "s390x"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/linux-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
+      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/netbsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
+      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/openbsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
+      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/sunos-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
+      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "sunos"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/win32-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
+      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/win32-ia32": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
+      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/@esbuild/win32-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
+      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vite-node/node_modules/esbuild": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
+      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "bin": {
+        "esbuild": "bin/esbuild"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "optionalDependencies": {
+        "@esbuild/aix-ppc64": "0.21.5",
+        "@esbuild/android-arm": "0.21.5",
+        "@esbuild/android-arm64": "0.21.5",
+        "@esbuild/android-x64": "0.21.5",
+        "@esbuild/darwin-arm64": "0.21.5",
+        "@esbuild/darwin-x64": "0.21.5",
+        "@esbuild/freebsd-arm64": "0.21.5",
+        "@esbuild/freebsd-x64": "0.21.5",
+        "@esbuild/linux-arm": "0.21.5",
+        "@esbuild/linux-arm64": "0.21.5",
+        "@esbuild/linux-ia32": "0.21.5",
+        "@esbuild/linux-loong64": "0.21.5",
+        "@esbuild/linux-mips64el": "0.21.5",
+        "@esbuild/linux-ppc64": "0.21.5",
+        "@esbuild/linux-riscv64": "0.21.5",
+        "@esbuild/linux-s390x": "0.21.5",
+        "@esbuild/linux-x64": "0.21.5",
+        "@esbuild/netbsd-x64": "0.21.5",
+        "@esbuild/openbsd-x64": "0.21.5",
+        "@esbuild/sunos-x64": "0.21.5",
+        "@esbuild/win32-arm64": "0.21.5",
+        "@esbuild/win32-ia32": "0.21.5",
+        "@esbuild/win32-x64": "0.21.5"
+      }
+    },
+    "node_modules/vite-node/node_modules/vite": {
+      "version": "5.4.21",
+      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.21.tgz",
+      "integrity": "sha512-o5a9xKjbtuhY6Bi5S3+HvbRERmouabWbyUcpXXUA1u+GNUKoROi9byOJ8M0nHbHYHkYICiMlqxkg1KkYmm25Sw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "esbuild": "^0.21.3",
+        "postcss": "^8.4.43",
+        "rollup": "^4.20.0"
+      },
+      "bin": {
+        "vite": "bin/vite.js"
+      },
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      },
+      "funding": {
+        "url": "https://github.com/vitejs/vite?sponsor=1"
+      },
+      "optionalDependencies": {
+        "fsevents": "~2.3.3"
+      },
+      "peerDependencies": {
+        "@types/node": "^18.0.0 || >=20.0.0",
+        "less": "*",
+        "lightningcss": "^1.21.0",
+        "sass": "*",
+        "sass-embedded": "*",
+        "stylus": "*",
+        "sugarss": "*",
+        "terser": "^5.4.0"
+      },
+      "peerDependenciesMeta": {
+        "@types/node": {
+          "optional": true
+        },
+        "less": {
+          "optional": true
+        },
+        "lightningcss": {
+          "optional": true
+        },
+        "sass": {
+          "optional": true
+        },
+        "sass-embedded": {
+          "optional": true
+        },
+        "stylus": {
+          "optional": true
+        },
+        "sugarss": {
+          "optional": true
+        },
+        "terser": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vitest": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/vitest/-/vitest-2.1.9.tgz",
+      "integrity": "sha512-MSmPM9REYqDGBI8439mA4mWhV5sKmDlBKWIYbA3lRb2PTHACE0mgKwA8yQ2xq9vxDTuk4iPrECBAEW2aoFXY0Q==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/expect": "2.1.9",
+        "@vitest/mocker": "2.1.9",
+        "@vitest/pretty-format": "^2.1.9",
+        "@vitest/runner": "2.1.9",
+        "@vitest/snapshot": "2.1.9",
+        "@vitest/spy": "2.1.9",
+        "@vitest/utils": "2.1.9",
+        "chai": "^5.1.2",
+        "debug": "^4.3.7",
+        "expect-type": "^1.1.0",
+        "magic-string": "^0.30.12",
+        "pathe": "^1.1.2",
+        "std-env": "^3.8.0",
+        "tinybench": "^2.9.0",
+        "tinyexec": "^0.3.1",
+        "tinypool": "^1.0.1",
+        "tinyrainbow": "^1.2.0",
+        "vite": "^5.0.0",
+        "vite-node": "2.1.9",
+        "why-is-node-running": "^2.3.0"
+      },
+      "bin": {
+        "vitest": "vitest.mjs"
+      },
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      },
+      "peerDependencies": {
+        "@edge-runtime/vm": "*",
+        "@types/node": "^18.0.0 || >=20.0.0",
+        "@vitest/browser": "2.1.9",
+        "@vitest/ui": "2.1.9",
+        "happy-dom": "*",
+        "jsdom": "*"
+      },
+      "peerDependenciesMeta": {
+        "@edge-runtime/vm": {
+          "optional": true
+        },
+        "@types/node": {
+          "optional": true
+        },
+        "@vitest/browser": {
+          "optional": true
+        },
+        "@vitest/ui": {
+          "optional": true
+        },
+        "happy-dom": {
+          "optional": true
+        },
+        "jsdom": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/aix-ppc64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.21.5.tgz",
+      "integrity": "sha512-1SDgH6ZSPTlggy1yI6+Dbkiz8xzpHJEVAlF/AM1tHPLsf5STom9rwtjE4hKAF20FfXXNTFqEYXyJNWh1GiZedQ==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "aix"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/android-arm": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.21.5.tgz",
+      "integrity": "sha512-vCPvzSjpPHEi1siZdlvAlsPxXl7WbOVUBBAowWug4rJHb68Ox8KualB+1ocNvT5fjv6wpkX6o/iEpbDrf68zcg==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/android-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.21.5.tgz",
+      "integrity": "sha512-c0uX9VAUBQ7dTDCjq+wdyGLowMdtR/GoC2U5IYk/7D1H1JYC0qseD7+11iMP2mRLN9RcCMRcjC4YMclCzGwS/A==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/android-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.21.5.tgz",
+      "integrity": "sha512-D7aPRUUNHRBwHxzxRvp856rjUHRFW1SdQATKXH2hqA0kAZb1hKmi02OpYRacl0TxIGz/ZmXWlbZgjwWYaCakTA==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "android"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/darwin-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.21.5.tgz",
+      "integrity": "sha512-DwqXqZyuk5AiWWf3UfLiRDJ5EDd49zg6O9wclZ7kUMv2WRFr4HKjXp/5t8JZ11QbQfUS6/cRCKGwYhtNAY88kQ==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/darwin-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.21.5.tgz",
+      "integrity": "sha512-se/JjF8NlmKVG4kNIuyWMV/22ZaerB+qaSi5MdrXtd6R08kvs2qCN4C09miupktDitvh8jRFflwGFBQcxZRjbw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "darwin"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/freebsd-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.21.5.tgz",
+      "integrity": "sha512-5JcRxxRDUJLX8JXp/wcBCy3pENnCgBR9bN6JsY4OmhfUtIHe3ZW0mawA7+RDAcMLrMIZaf03NlQiX9DGyB8h4g==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/freebsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.21.5.tgz",
+      "integrity": "sha512-J95kNBj1zkbMXtHVH29bBriQygMXqoVQOQYA+ISs0/2l3T9/kj42ow2mpqerRBxDJnmkUDCaQT/dfNXWX/ZZCQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "freebsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-arm": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.21.5.tgz",
+      "integrity": "sha512-bPb5AHZtbeNGjCKVZ9UGqGwo8EUu4cLq68E95A53KlxAPRmUyYv2D6F0uUI65XisGOL1hBP5mTronbgo+0bFcA==",
+      "cpu": [
+        "arm"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.21.5.tgz",
+      "integrity": "sha512-ibKvmyYzKsBeX8d8I7MH/TMfWDXBF3db4qM6sy+7re0YXya+K1cem3on9XgdT2EQGMu4hQyZhan7TeQ8XkGp4Q==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-ia32": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.21.5.tgz",
+      "integrity": "sha512-YvjXDqLRqPDl2dvRODYmmhz4rPeVKYvppfGYKSNGdyZkA01046pLWyRKKI3ax8fbJoK5QbxblURkwK/MWY18Tg==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-loong64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.21.5.tgz",
+      "integrity": "sha512-uHf1BmMG8qEvzdrzAqg2SIG/02+4/DHB6a9Kbya0XDvwDEKCoC8ZRWI5JJvNdUjtciBGFQ5PuBlpEOXQj+JQSg==",
+      "cpu": [
+        "loong64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-mips64el": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.21.5.tgz",
+      "integrity": "sha512-IajOmO+KJK23bj52dFSNCMsz1QP1DqM6cwLUv3W1QwyxkyIWecfafnI555fvSGqEKwjMXVLokcV5ygHW5b3Jbg==",
+      "cpu": [
+        "mips64el"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-ppc64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.21.5.tgz",
+      "integrity": "sha512-1hHV/Z4OEfMwpLO8rp7CvlhBDnjsC3CttJXIhBi+5Aj5r+MBvy4egg7wCbe//hSsT+RvDAG7s81tAvpL2XAE4w==",
+      "cpu": [
+        "ppc64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-riscv64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.21.5.tgz",
+      "integrity": "sha512-2HdXDMd9GMgTGrPWnJzP2ALSokE/0O5HhTUvWIbD3YdjME8JwvSCnNGBnTThKGEB91OZhzrJ4qIIxk/SBmyDDA==",
+      "cpu": [
+        "riscv64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-s390x": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.21.5.tgz",
+      "integrity": "sha512-zus5sxzqBJD3eXxwvjN1yQkRepANgxE9lgOW2qLnmr8ikMTphkjgXu1HR01K4FJg8h1kEEDAqDcZQtbrRnB41A==",
+      "cpu": [
+        "s390x"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/linux-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.21.5.tgz",
+      "integrity": "sha512-1rYdTpyv03iycF1+BhzrzQJCdOuAOtaqHTWJZCWvijKD2N5Xu0TtVC8/+1faWqcP9iBCWOmjmhoH94dH82BxPQ==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "linux"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/netbsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.21.5.tgz",
+      "integrity": "sha512-Woi2MXzXjMULccIwMnLciyZH4nCIMpWQAs049KEeMvOcNADVxo0UBIQPfSmxB3CWKedngg7sWZdLvLczpe0tLg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "netbsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/openbsd-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.21.5.tgz",
+      "integrity": "sha512-HLNNw99xsvx12lFBUwoT8EVCsSvRNDVxNpjZ7bPn947b8gJPzeHWyNVhFsaerc0n3TsbOINvRP2byTZ5LKezow==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "openbsd"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/sunos-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.21.5.tgz",
+      "integrity": "sha512-6+gjmFpfy0BHU5Tpptkuh8+uw3mnrvgs+dSPQXQOv3ekbordwnzTVEb4qnIvQcYXq6gzkyTnoZ9dZG+D4garKg==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "sunos"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/win32-arm64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.21.5.tgz",
+      "integrity": "sha512-Z0gOTd75VvXqyq7nsl93zwahcTROgqvuAcYDUr+vOv8uHhNSKROyU961kgtCD1e95IqPKSQKH7tBTslnS3tA8A==",
+      "cpu": [
+        "arm64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/win32-ia32": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.21.5.tgz",
+      "integrity": "sha512-SWXFF1CL2RVNMaVs+BBClwtfZSvDgtL//G/smwAc5oVK/UPu2Gu9tIaRgFmYFFKrmg3SyAjSrElf0TiJ1v8fYA==",
+      "cpu": [
+        "ia32"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@esbuild/win32-x64": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.21.5.tgz",
+      "integrity": "sha512-tQd/1efJuzPC6rCFwEvLtci/xNFcTZknmXs98FYDfGE4wP9ClFV98nyKrzJKVPMhdDnjzLhdUyMX4PsQAPjwIw==",
+      "cpu": [
+        "x64"
+      ],
+      "dev": true,
+      "license": "MIT",
+      "optional": true,
+      "os": [
+        "win32"
+      ],
+      "engines": {
+        "node": ">=12"
+      }
+    },
+    "node_modules/vitest/node_modules/@vitest/mocker": {
+      "version": "2.1.9",
+      "resolved": "https://registry.npmjs.org/@vitest/mocker/-/mocker-2.1.9.tgz",
+      "integrity": "sha512-tVL6uJgoUdi6icpxmdrn5YNo3g3Dxv+IHJBr0GXHaEdTcw3F+cPKnsXFhli6nO+f/6SDKPHEK1UN+k+TQv0Ehg==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "@vitest/spy": "2.1.9",
+        "estree-walker": "^3.0.3",
+        "magic-string": "^0.30.12"
+      },
+      "funding": {
+        "url": "https://opencollective.com/vitest"
+      },
+      "peerDependencies": {
+        "msw": "^2.4.9",
+        "vite": "^5.0.0"
+      },
+      "peerDependenciesMeta": {
+        "msw": {
+          "optional": true
+        },
+        "vite": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/vitest/node_modules/esbuild": {
+      "version": "0.21.5",
+      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.21.5.tgz",
+      "integrity": "sha512-mg3OPMV4hXywwpoDxu3Qda5xCKQi+vCTZq8S9J/EpkhB2HzKXq4SNFZE3+NK93JYxc8VMSep+lOUSC/RVKaBqw==",
+      "dev": true,
+      "hasInstallScript": true,
+      "license": "MIT",
+      "bin": {
+        "esbuild": "bin/esbuild"
+      },
+      "engines": {
+        "node": ">=12"
+      },
+      "optionalDependencies": {
+        "@esbuild/aix-ppc64": "0.21.5",
+        "@esbuild/android-arm": "0.21.5",
+        "@esbuild/android-arm64": "0.21.5",
+        "@esbuild/android-x64": "0.21.5",
+        "@esbuild/darwin-arm64": "0.21.5",
+        "@esbuild/darwin-x64": "0.21.5",
+        "@esbuild/freebsd-arm64": "0.21.5",
+        "@esbuild/freebsd-x64": "0.21.5",
+        "@esbuild/linux-arm": "0.21.5",
+        "@esbuild/linux-arm64": "0.21.5",
+        "@esbuild/linux-ia32": "0.21.5",
+        "@esbuild/linux-loong64": "0.21.5",
+        "@esbuild/linux-mips64el": "0.21.5",
+        "@esbuild/linux-ppc64": "0.21.5",
+        "@esbuild/linux-riscv64": "0.21.5",
+        "@esbuild/linux-s390x": "0.21.5",
+        "@esbuild/linux-x64": "0.21.5",
+        "@esbuild/netbsd-x64": "0.21.5",
+        "@esbuild/openbsd-x64": "0.21.5",
+        "@esbuild/sunos-x64": "0.21.5",
+        "@esbuild/win32-arm64": "0.21.5",
+        "@esbuild/win32-ia32": "0.21.5",
+        "@esbuild/win32-x64": "0.21.5"
+      }
+    },
+    "node_modules/vitest/node_modules/vite": {
+      "version": "5.4.21",
+      "resolved": "https://registry.npmjs.org/vite/-/vite-5.4.21.tgz",
+      "integrity": "sha512-o5a9xKjbtuhY6Bi5S3+HvbRERmouabWbyUcpXXUA1u+GNUKoROi9byOJ8M0nHbHYHkYICiMlqxkg1KkYmm25Sw==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "esbuild": "^0.21.3",
+        "postcss": "^8.4.43",
+        "rollup": "^4.20.0"
+      },
+      "bin": {
+        "vite": "bin/vite.js"
+      },
+      "engines": {
+        "node": "^18.0.0 || >=20.0.0"
+      },
+      "funding": {
+        "url": "https://github.com/vitejs/vite?sponsor=1"
+      },
+      "optionalDependencies": {
+        "fsevents": "~2.3.3"
+      },
+      "peerDependencies": {
+        "@types/node": "^18.0.0 || >=20.0.0",
+        "less": "*",
+        "lightningcss": "^1.21.0",
+        "sass": "*",
+        "sass-embedded": "*",
+        "stylus": "*",
+        "sugarss": "*",
+        "terser": "^5.4.0"
+      },
+      "peerDependenciesMeta": {
+        "@types/node": {
+          "optional": true
+        },
+        "less": {
+          "optional": true
+        },
+        "lightningcss": {
+          "optional": true
+        },
+        "sass": {
+          "optional": true
+        },
+        "sass-embedded": {
+          "optional": true
+        },
+        "stylus": {
+          "optional": true
+        },
+        "sugarss": {
+          "optional": true
+        },
+        "terser": {
+          "optional": true
+        }
+      }
+    },
+    "node_modules/why-is-node-running": {
+      "version": "2.3.0",
+      "resolved": "https://registry.npmjs.org/why-is-node-running/-/why-is-node-running-2.3.0.tgz",
+      "integrity": "sha512-hUrmaWBdVDcxvYqnyh09zunKzROWjbZTiNy8dBEjkS7ehEDQibXJ7XvlmtbwuTclUiIyN+CyXQD4Vmko8fNm8w==",
+      "dev": true,
+      "license": "MIT",
+      "dependencies": {
+        "siginfo": "^2.0.0",
+        "stackback": "0.0.2"
+      },
+      "bin": {
+        "why-is-node-running": "cli.js"
+      },
+      "engines": {
+        "node": ">=8"
+      }
+    },
+    "node_modules/yallist": {
+      "version": "3.1.1",
+      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
+      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
+      "dev": true,
+      "license": "ISC"
+    }
+  }
+}
diff --git a/package.json b/package.json
index ac31bd6a7d0816357df766ab8448e74fc47722f5..7a40646f00f8ada83e85e54cb6e68e169aaa7ba1 100644
--- a/package.json
+++ b/package.json
@@ -1,21 +1,25 @@
 {
   "name": "les-douceurs-de-mil√©na",
   "private": true,
   "version": "0.0.0",
   "type": "module",
   "scripts": {
     "dev": "vite",
     "build": "vite build",
-    "preview": "vite preview"
+    "preview": "vite preview",
+    "test": "vitest run",
+    "test:watch": "vitest",
+    "typecheck": "tsc --noEmit"
   },
   "dependencies": {
     "react-dom": "^19.2.4",
     "react": "^19.2.4"
   },
   "devDependencies": {
     "@types/node": "^22.14.0",
     "@vitejs/plugin-react": "^5.0.0",
     "typescript": "~5.8.2",
-    "vite": "^6.2.0"
+    "vite": "^6.2.0",
+    "vitest": "^2.1.9"
   }
 }
diff --git a/tests/utils.test.ts b/tests/utils.test.ts
new file mode 100644
index 0000000000000000000000000000000000000000..b791173516f170cb934540733fa6622f3954f43a
--- /dev/null
+++ b/tests/utils.test.ts
@@ -0,0 +1,58 @@
+import { describe, expect, it } from 'vitest';
+import { calculateProductMetrics, calculateRecipeMaterialCost } from '../utils';
+import { GlobalSettings, Ingredient, Product, Recipe, Unit } from '../types';
+
+describe('utils calculations', () => {
+  it('applies recipe loss percentage to material cost', () => {
+    const ingredients: Ingredient[] = [
+      { id: 'i1', name: 'Farine', unit: Unit.G, price: 1, quantity: 1, costPerBaseUnit: 0.01 }
+    ];
+    const recipe: Recipe = {
+      id: 'r1',
+      name: 'Test',
+      ingredients: [{ ingredientId: 'i1', quantity: 100 }],
+      batchYield: 10,
+      lossPercentage: 10
+    };
+
+    expect(calculateRecipeMaterialCost(recipe, ingredients)).toBeCloseTo(1.1, 6);
+  });
+
+  it('does not clamp invalid loss rates in product metrics', () => {
+    const ingredients: Ingredient[] = [
+      { id: 'i1', name: 'Farine', unit: Unit.G, price: 1, quantity: 1, costPerBaseUnit: 0.01 }
+    ];
+    const recipe: Recipe = {
+      id: 'r1',
+      name: 'Test',
+      ingredients: [{ ingredientId: 'i1', quantity: 100 }],
+      batchYield: 10,
+      lossPercentage: 0
+    };
+    const product: Product = {
+      id: 'p1',
+      name: 'Produit',
+      recipeId: 'r1',
+      laborTimeMinutes: 0,
+      packagingCost: 0,
+      variableDeliveryCost: 0,
+      lossRate: 100,
+      unsoldEstimate: 0,
+      packagingUsedOnUnsold: true,
+      targetMargin: 0,
+      estimatedMonthlySales: 10,
+      category: 'test'
+    };
+    const settings: GlobalSettings = {
+      currency: 'EUR',
+      hourlyRate: 0,
+      fixedCostItems: [],
+      taxRate: 0,
+      isTvaSubject: false,
+      defaultTvaRate: 0
+    };
+
+    const metrics = calculateProductMetrics(product, recipe, ingredients, settings, [product]);
+    expect(Number.isFinite(metrics.totalVariableCosts)).toBe(false);
+  });
+});
diff --git a/tests/validation.test.ts b/tests/validation.test.ts
new file mode 100644
index 0000000000000000000000000000000000000000..1d0a3fc269fb256156695a234ae26de0c6bfb69d
--- /dev/null
+++ b/tests/validation.test.ts
@@ -0,0 +1,33 @@
+import { describe, expect, it } from 'vitest';
+import { isNonNegativeNumber, isPercentage, isPositiveNumber, parseOptionalNumber } from '../validation';
+
+describe('validation helpers', () => {
+  it('parses optional numbers safely', () => {
+    expect(parseOptionalNumber('')).toBeUndefined();
+    expect(parseOptionalNumber('   ')).toBeUndefined();
+    expect(parseOptionalNumber('12.5')).toBe(12.5);
+    expect(parseOptionalNumber('0')).toBe(0);
+    expect(parseOptionalNumber('nope')).toBeUndefined();
+  });
+
+  it('validates non-negative numbers', () => {
+    expect(isNonNegativeNumber(0)).toBe(true);
+    expect(isNonNegativeNumber(2.3)).toBe(true);
+    expect(isNonNegativeNumber(-1)).toBe(false);
+    expect(isNonNegativeNumber(Number.NaN)).toBe(false);
+    expect(isNonNegativeNumber(Number.POSITIVE_INFINITY)).toBe(false);
+  });
+
+  it('validates positive numbers', () => {
+    expect(isPositiveNumber(1)).toBe(true);
+    expect(isPositiveNumber(0)).toBe(false);
+    expect(isPositiveNumber(-5)).toBe(false);
+  });
+
+  it('validates percentage ranges', () => {
+    expect(isPercentage(0)).toBe(true);
+    expect(isPercentage(99.99)).toBe(true);
+    expect(isPercentage(100)).toBe(false);
+    expect(isPercentage(-1)).toBe(false);
+  });
+});
diff --git a/utils.ts b/utils.ts
index 4b55dcadaee8d61ae04f96e53e113a3b5c816b3f..85bda0c787d480a9aa31caa777c58791b89f6670 100644
--- a/utils.ts
+++ b/utils.ts
@@ -16,98 +16,94 @@ export const formatCurrency = (amount: number, currency = '‚Ç¨') => {
 // Core Calculation Logic
 export const calculateRecipeMaterialCost = (recipe: Recipe, ingredients: Ingredient[]): number => {
   const batchCost = recipe.ingredients.reduce((total, item) => {
     const ingredient = ingredients.find(i => i.id === item.ingredientId);
     if (!ingredient) return total;
     return total + (item.quantity * ingredient.costPerBaseUnit);
   }, 0);
   return batchCost * (1 + (recipe.lossPercentage / 100));
 };
 
 export const calculateProductMetrics = (
   product: Product,
   recipe: Recipe,
   ingredients: Ingredient[],
   settings: GlobalSettings,
   allProducts: Product[] 
 ) => {
   // TVA Logic
   const isTvaSubject = settings.isTvaSubject;
   const tvaRate = product.tvaRate ?? settings.defaultTvaRate ?? 0;
 
   // 1. Material Cost per Produced Unit
   // NOTE: If isTvaSubject is true, we assume ingredient prices in DB are HT (because business recovers VAT).
   // If false, ingredient prices are TTC (final cost for artisan).
   const batchMaterialCost = calculateRecipeMaterialCost(recipe, ingredients);
-  const unitMaterialCost = batchMaterialCost / (recipe.batchYield || 1);
+  const unitMaterialCost = batchMaterialCost / (recipe.batchYield ?? 1);
 
   // 2. Labor Cost per Unit
   const laborCost = (product.laborTimeMinutes / 60) * settings.hourlyRate;
 
   // 3. Allocated Fixed Costs
   const totalEstimatedVolume = allProducts.reduce((sum, p) => sum + (p.estimatedMonthlySales || 0), 0);
   const totalFixedCosts = settings.fixedCostItems.reduce((sum, item) => sum + item.amount, 0);
   
   const allocatedFixedCost = totalEstimatedVolume > 0 
     ? totalFixedCosts / totalEstimatedVolume
     : 0;
 
   // 4. Manufacturing Loss (Waste during creation)
-  let safeLossRate = product.lossRate;
-  if (safeLossRate >= 100) safeLossRate = 99.9;
-  if (safeLossRate < 0) safeLossRate = 0;
-  
-  const manufacturingLossMultiplier = 1 / (1 - (safeLossRate / 100));
+  const manufacturingLossMultiplier = 1 / (1 - (product.lossRate / 100));
 
   // 5. Unsold Items Impact (Finished goods thrown away)
-  const sales = product.estimatedMonthlySales || 1;
+  const sales = product.estimatedMonthlySales ?? 1;
   const unsold = product.unsoldEstimate || 0;
   
   // Ratios for cost attribution
   const materialProductionRatio = (sales + unsold) / sales;
   const packagingQuantity = sales + (product.packagingUsedOnUnsold ? unsold : 0);
   const packagingRatio = packagingQuantity / sales;
 
   // Variable Costs per Sold Unit calculation
   const finalMaterialCost = unitMaterialCost * manufacturingLossMultiplier * materialProductionRatio;
   const finalPackagingCost = product.packagingCost * manufacturingLossMultiplier * packagingRatio;
   const finalDeliveryCost = product.variableDeliveryCost;
 
   const totalVariableCosts = finalMaterialCost + finalPackagingCost + finalDeliveryCost;
 
   // 6. Full Cost
   // If isTvaSubject, this is Full Cost HT.
   const fullCost = totalVariableCosts + laborCost + allocatedFixedCost;
 
   // 7. Minimum Price (Breakeven)
   // Social contributions (settings.taxRate) are deducted from Revenue.
   // Revenue Base:
   // - If isTvaSubject: Contributions are usually on CA HT (or Net). We'll assume CA HT.
   // - If !isTvaSubject: Contributions are on CA Total.
   
   const socialRateDecimal = settings.taxRate / 100;
-  const divisor = 1 - socialRateDecimal > 0 ? 1 - socialRateDecimal : 1;
+  const divisor = 1 - socialRateDecimal;
   
   // Price required to cover Full Cost after paying social charges
   const minPriceBreakevenHT = fullCost / divisor;
 
   // 8. Target Price
   const priceWithMarginHT = (fullCost + product.targetMargin) / divisor;
 
   // 9. TTC Conversions
   const minPriceBreakevenTTC = isTvaSubject ? minPriceBreakevenHT * (1 + tvaRate / 100) : minPriceBreakevenHT;
   const priceWithMarginTTC = isTvaSubject ? priceWithMarginHT * (1 + tvaRate / 100) : priceWithMarginHT;
 
   return {
     unitMaterialCost,
     laborCost,
     allocatedFixedCost,
     fullCost, // This is HT if isTvaSubject, else TTC (cost to artisan)
     minPriceBreakeven: minPriceBreakevenHT, // HT if subject
     minPriceBreakevenTTC,
     priceWithMargin: priceWithMarginHT, // HT if subject
     priceWithMarginTTC,
     totalVariableCosts,
     tvaRate: isTvaSubject ? tvaRate : 0
   };
 };
 
diff --git a/validation.ts b/validation.ts
new file mode 100644
index 0000000000000000000000000000000000000000..fb6ca7210514620ba7cb3f08b2e6b77b00b55ace
--- /dev/null
+++ b/validation.ts
@@ -0,0 +1,17 @@
+export const parseOptionalNumber = (value: string): number | undefined => {
+  if (value.trim() === '') {
+    return undefined;
+  }
+
+  const parsed = Number(value);
+  return Number.isFinite(parsed) ? parsed : undefined;
+};
+
+export const isNonNegativeNumber = (value: unknown): value is number =>
+  typeof value === 'number' && Number.isFinite(value) && value >= 0;
+
+export const isPositiveNumber = (value: unknown): value is number =>
+  typeof value === 'number' && Number.isFinite(value) && value > 0;
+
+export const isPercentage = (value: unknown): value is number =>
+  typeof value === 'number' && Number.isFinite(value) && value >= 0 && value < 100;
